{"version":3,"file":"location-8b461d59.js","sources":["../../src/assets/icons/camera.svg?url","../../src/views/settings/shared/ProfilePic.vue","../../src/views/settings/shared/DetailsCard.vue","../../src/views/settings/shared/EditProfile.vue","../../src/assets/icons/call.svg?url","../../src/assets/icons/mail.svg?url","../../src/assets/icons/user-check.svg?url","../../src/assets/icons/location.svg?url"],"sourcesContent":["export default \"__VITE_ASSET__2c0c7f3d__\"","<template>\n  <div\n    class=\"relative overflow-hidden h-72 w-52 max-w-full rounded-xl bg-primary flex-shrink-0 flex items-center justify-center\"\n  >\n    <img\n      v-if=\"user && user && user.pfp\"\n      :src=\"user && user.pfp\"\n      alt=\"\"\n      class=\"h-full w-full object-cover\"\n    />\n    <span v-else class=\"font-bold text-white text-7xl\">\n      {{ initials(userName) }}\n    </span>\n    <div\n      class=\"photo-gradient w-full absolute left-0 bottom-0 flex items-center justify-center gap-4 p-4\"\n    >\n      <div\n        class=\"flex-shrink-0 w-12 h-9 cursor-pointer border border-white rounded-full flex items-center justify-center\"\n      >\n        <i class=\"pi pi-times text-white text-sm\"></i>\n      </div>\n      <easiEditor @cropped=\"updateProfilePic\">\n        <div\n          class=\"flex-shrink-0 w-12 h-9 cursor-pointer bg-primary rounded-full flex items-center justify-center\"\n        >\n          <img :src=\"cameraIcon\" alt=\"\" class=\"w-5\" />\n        </div>\n      </easiEditor>\n    </div>\n  </div>\n\n  <easiLoader v-if=\"loading\" />\n</template>\n\n<script setup>\nimport cameraIcon from '@/assets/icons/camera.svg?url'\nimport { helperFunctions } from '@/composable/helperFunctions'\nimport { computed, ref } from 'vue'\nimport { useDataStore } from '@/stores/data.js'\nimport { useToast } from 'vue-toastification'\n\nconst { initials } = helperFunctions\nconst store = useDataStore()\nconst { query, mutate } = store\nconst toast = useToast()\n\nconst loading = ref(false)\nconst props = defineProps({\n  profile: {\n    type: Boolean,\n    default: false\n  },\n  user: Object\n})\n\nconst userName = computed(() => {\n  if (props.user) {\n    return `${props.user.firstName} ${props.user.lastName}`\n  }\n})\n\nconst updateProfilePic = async (url) => {\n  try {\n    const payload = {\n      firstName: props.user.firstName,\n      lastName: props.user.lastName,\n      id: props.user._id,\n      email: props.user.email,\n      pfp: url\n    }\n\n    loading.value = true\n\n    console.log(payload)\n    const res = await mutate({\n      endpoint: 'UpdateAnAdminUser',\n      data: {\n        input: payload\n      }\n    })\n\n    console.log(res)\n    loading.value = false\n    if (res.success) {\n      if (props.profile) {\n        queryUsersProfile()\n      } else {\n        queryAdminUsers()\n      }\n\n      toast.success('Profile photo successfully updated')\n    } else {\n      toast.error(res.message)\n    }\n  } catch (error) {\n    loading.value = false\n    console.log(error.message)\n  }\n}\n\nconst queryUsersProfile = async () => {\n  try {\n    await query({\n      endpoint: 'GetMyProfile',\n      storeKey: 'user'\n    })\n  } catch (error) {\n    console.log(error.message)\n  }\n}\n\nconst queryAdminUsers = async () => {\n  try {\n    await query({\n      endpoint: 'GetAdminUsers',\n      payload: {\n        input: {\n          addedBy: null\n        }\n      },\n      storeKey: 'adminUsers'\n    })\n  } catch (error) {\n    console.log(error.message)\n  }\n}\n</script>\n\n<style scope>\n.photo-gradient {\n  /* background: linear-gradient(\n    360deg,\n    #242424 0%,\n    rgba(81, 81, 81, 0.9) 27.09%,\n    rgba(139, 139, 139, 0.539111) 56.07%,\n    rgba(218, 218, 218, 0) 88.16%\n  ); */\n  background: linear-gradient(\n    360deg,\n    #020706 0%,\n    rgba(15, 20, 19, 0.77) 31.64%,\n    rgba(3, 9, 7, 0.22) 67.17%,\n    rgba(251, 251, 251, 0) 106.58%\n  );\n}\n</style>\n","<template>\n  <div class=\"flex items-center gap-2\">\n    <div class=\"w-9 h-9 flex-shrink-0 flex items-center justify-center bg-tertiary rounded-full\">\n      <img :src=\"data && data.icon\" alt=\"\" />\n    </div>\n    <div class=\"grow flex flex-col leading-5\">\n      <span class=\"text-dark-700 text-sm\">{{ data && data.title }}</span>\n      <span v-if=\"data && !data.link\" class=\"\">{{ data && data.value }}</span>\n      <a v-else target=\"_blank\" :href=\"data && data.link\" class=\"text-[#359AA0] underline\">\n        {{ data && data.value }}\n      </a>\n    </div>\n\n    <CopyIcon\n      @click=\"copyText(data.link)\"\n      v-if=\"data && data.copy\"\n      class=\"w-5 flex-shrink-0 cursor-pointer\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport CopyIcon from '@/components/icons/CopyIcon.vue'\nimport { helperFunctions } from '@/composable/helperFunctions'\nconst { copyText } = helperFunctions\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    default: () => ({})\n  }\n})\n</script>\n\n<style></style>\n","<template>\n  <easiModal v-if=\"isOpen\" persistence @close=\"$emit('close')\">\n    <div class=\"p-6 flex flex-col gap-4 sm:gap-6\">\n      <div class=\"text-2xl\">Edit Profile</div>\n\n      <form @submit.prevent=\"submit\" ref=\"form\" autocomplete=\"on\" class=\"flex flex-col gap-6\">\n        <easiTextInput v-model=\"args.firstName\" label=\"First Name\" :error=\"errorRules.firstName\" />\n        <easiTextInput v-model=\"args.lastName\" label=\"Last Name\" :error=\"errorRules.lastName\" />\n        <easiTextInput\n          v-model=\"args.email\"\n          type=\"email\"\n          inputmode=\"email\"\n          label=\"Email\"\n          :error=\"errorRules.email\"\n        />\n        <easiTextInput\n          v-model=\"args.phoneNumber\"\n          type=\"tel\"\n          inputmode=\"numeric\"\n          label=\"Phone Number\"\n          :error=\"errorRules.phoneNumber\"\n        />\n        <easiTextInput v-model=\"args.address\" label=\"Address\" :error=\"errorRules.address\" />\n\n        <div class=\"grid grid-cols-2 gap-4 items-center place-content-center\">\n          <easiButton @click=\"$emit('close')\" variant=\"outlined\" block>Cancel</easiButton>\n          <easiButton :loading=\"loading\" type=\"submit\" block>Submit</easiButton>\n        </div>\n      </form>\n    </div>\n  </easiModal>\n\n  <easiAlert\n    v-if=\"successAlert\"\n    :persistence=\"false\"\n    @close=\"successAlert = false\"\n    caption=\"Update Successful\"\n  >\n  </easiAlert>\n</template>\n\n<script setup>\nimport { computed, onMounted, reactive, ref, watch } from 'vue'\nimport { helperFunctions } from '@/composable/helperFunctions'\nimport { useDataStore } from '@/stores/data.js'\nimport { useToast } from 'vue-toastification'\n\nconst store = useDataStore()\nconst { query, mutate } = store\nconst toast = useToast()\nconst { processNumber, validateEmail } = helperFunctions\n\nconst props = defineProps({\n  isOpen: {\n    type: Boolean,\n    default: false\n  },\n  user: {\n    type: Object,\n    default: () => ({})\n  }\n})\nconst emit = defineEmits(['close', 'complete'])\n\nconst watchUser = computed(() => props.user)\n\nconst loading = ref(false)\nconst successAlert = ref(false)\n\nconst args = reactive({\n  firstName: '',\n  lastName: '',\n  email: '',\n  phoneNumber: '',\n  address: '',\n  accountType: '',\n  id: ''\n})\n\nconst errorRules = reactive({\n  firstName: false,\n  lastName: false,\n  email: false,\n  phoneNumber: false,\n  address: false\n})\n\nconst clearFields = () => {\n  args.id = ''\n  args.firstName = ''\n  args.lastName = ''\n  args.email = ''\n  args.phoneNumber = ''\n  args.address = ''\n  args.accountType = ''\n}\n\nfunction assignValues() {\n  clearFields()\n  const keys = ['firstName', 'lastName', 'email', 'phoneNumber', 'address', 'accountType']\n  for (let i = 0; i < keys.length; i++) {\n    if (props.user && props.user[keys[i]]) {\n      args[keys[i]] = props.user[keys[i]]\n    }\n  }\n  console.log(props.user)\n}\nassignValues()\n\nwatch(watchUser, () => {\n  assignValues()\n})\n\nfunction validation() {\n  let checkNumber =\n    isNaN(args.phoneNumber.trim()) ||\n    (processNumber(args.phoneNumber) && processNumber(args.phoneNumber).length !== 13)\n\n  if (args.firstName.trim() === '') {\n    errorRules.firstName = 'Please fill in your first name'\n    return false\n  } else if (args.lastName.trim() === '') {\n    errorRules.lastName = 'Please fill in your last name'\n    return false\n  } else if (args.email.trim() === '') {\n    errorRules.email = 'Please fill in your email address'\n    return false\n  } else if (!validateEmail(args.email)) {\n    errorRules.email = 'Email is badly formated'\n    return false\n  } else if (args.phoneNumber.trim() === '') {\n    errorRules.phoneNumber = 'Please fill in your phone number'\n    return false\n  } else if (checkNumber !== false) {\n    errorRules.phoneNumber = 'Phone number badly formatted'\n    return false\n  } else if (args.address.trim() === '') {\n    errorRules.address = 'Please fill in your company'\n    return false\n  } else {\n    //Reset Error\n    Object.keys(errorRules).forEach((key) => {\n      errorRules[key] = false\n    })\n\n    return true\n  }\n}\n\nconst submit = async () => {\n  if (validation()) {\n    args.id = props.user._id\n    console.log(args)\n\n    try {\n      loading.value = true\n\n      const res = await mutate({\n        endpoint: 'UpdateAnAdminUser',\n        data: {\n          input: args\n        }\n      })\n\n      console.log(res)\n      loading.value = false\n\n      if (res.success) {\n        emit('close')\n        successAlert.value = true\n        queryAdmin()\n        emit('complete')\n\n        setTimeout(() => {\n          successAlert.value = false\n        }, 3000)\n      } else {\n        toast.error(res.message)\n      }\n    } catch (error) {\n      loading.value = false\n      console.log(error.message)\n    }\n  }\n}\n\nconst queryAdmin = async () => {\n  try {\n    await query({\n      endpoint: 'GetAdminUsers',\n      payload: {\n        input: {\n          addedBy: null\n        }\n      },\n      storeKey: 'adminUsers'\n    })\n  } catch (error) {\n    console.log(error.message)\n  }\n}\n</script>\n\n<style></style>\n","export default \"__VITE_ASSET__2456dbbb__\"","export default \"__VITE_ASSET__8b3f8749__\"","export default \"__VITE_ASSET__7f6dbc3a__\"","export default \"__VITE_ASSET__0ebcb08a__\""],"names":["cameraIcon","initials","helperFunctions","store","useDataStore","query","mutate","toast","useToast","loading","ref","userName","computed","props","updateProfilePic","url","payload","res","queryUsersProfile","queryAdminUsers","error","copyText","processNumber","validateEmail","watchUser","successAlert","args","reactive","errorRules","clearFields","assignValues","keys","i","watch","validation","checkNumber","key","submit","emit","queryAdmin","CallIcon","MailIcon","UserCheckIcon","LocationIcon"],"mappings":"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"}