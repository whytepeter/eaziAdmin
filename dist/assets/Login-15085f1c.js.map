{"version":3,"file":"Login-15085f1c.js","sources":["../../src/views/auth/Login/assets/curve.svg?url","../../src/assets/icons/arrow-left.svg?url","../../src/views/auth/Login/assets/openingQuote.svg?url","../../src/views/auth/Login/assets/topFrame.svg?url","../../src/views/auth/Login/assets/bottomFrame.svg?url","../../src/views/auth/Login/assets/closingQuote.svg?url","../../src/views/auth/Login/Frame.vue","../../src/views/auth/Login/PinInput.vue","../../src/views/auth/Login/OTPForm.vue","../../src/views/auth/Login/PersonIcon.vue","../../src/views/auth/Login/Login.vue"],"sourcesContent":["export default \"__VITE_ASSET__9e845ca9__\"","export default \"__VITE_ASSET__ca992536__\"","export default \"__VITE_ASSET__3fd58e17__\"","export default \"__VITE_ASSET__95424dc7__\"","export default \"__VITE_ASSET__906870ed__\"","export default \"__VITE_ASSET__55dd7a7e__\"","<template>\n    <div class=\"relative \">\n        <div class=\"flex absolute top-0 left-0  w-full gap-2 items-start\">\n            <img src=\"./assets/openingQuote.svg?url\" class=\" relative -top-4 h-10  inline-block\" />\n            <img class=\" w-full\" src=\"./assets/topFrame.svg?url\" />\n        </div>\n        <div class=\"px-12 py-10 text-white  font-bold\" style=\"font-size: 36px; line-height: 48px;\">\n            <slot />\n        </div>\n        <div class=\"flex absolute bottom-0 w-full left-0 gap-2 items-baseline\">\n\n            <img class=\"w-full\" src=\"./assets/bottomFrame.svg?url\" />\n            <img class=\"h-10 relative -bottom-4\" src=\"./assets/closingQuote.svg?url\" />\n\n        </div>\n\n    </div>\n</template>","<script setup>\nimport { ref, computed } from 'vue'\n\n\nconst props = defineProps({\n  label: String,\n  length: Number,\n  error: Boolean || String\n})\n\nconst emit = defineEmits(['change'])\n\nconst input = ref(Array(props.length).fill(''))\nconst inputRefs = ref([])\n\nconst errorFeedback = computed(() => typeof props.error === 'string' ? props.error : false)\n\n// keys\nconst BACKSPACE_KEY = 'Backspace'\nconst ARROWLEFT = 'ArrowLeft'\nconst ARROWRIGHT = 'ArrowRight'\n\nconst emitChange = () => {\n  emit('change', input.value.join(''))\n}\n\nconst handleKeyDown = (event, index) => {\n  const keyPressed = event.key\n  let nextTarget = inputRefs.value[index + 1]\n  let prevTarget = inputRefs.value[index - 1]\n  let prevValue = input.value[index]\n  switch (keyPressed) {\n    case BACKSPACE_KEY:\n      event.preventDefault()\n      if (!prevValue) {\n        if (prevTarget) {\n          prevTarget.focus()\n          prevTarget.select()\n        }\n      } else {\n        // delete entry\n        input.value[index] = ''\n        emitChange()\n      }\n      break\n    case ARROWLEFT:\n      event.preventDefault()\n      if (prevTarget) {\n        prevTarget.focus()\n        prevTarget.select()\n      }\n      break\n    case ARROWRIGHT:\n      event.preventDefault()\n      if (nextTarget) {\n        nextTarget.focus()\n        nextTarget.select()\n      }\n      break\n    default:\n      break\n  }\n}\n\nconst handleInput = (event, index) => {\n  event.preventDefault()\n  let value = event.target.value\n  if (!value) return\n  input.value[index] = value\n  emitChange()\n  let nextTarget = inputRefs.value[index + 1]\n  if (nextTarget) {\n    nextTarget.focus()\n    nextTarget.select()\n  }\n}\n\nconst handlePaste = (event, index) => {\n  event.preventDefault()\n  // Get the pasted text from the clipboard\n  const pastedText = event.clipboardData.getData('text/plain')\n  // start filling from index\n  let start = index\n  let newValue = [...input.value.slice(0, start), ...pastedText].slice(0, props.length)\n  input.value = newValue\n  emitChange()\n}\n</script>\n\n<template>\n  <div class=\"pin-input\" :class=\"{ error: !!error }\">\n    <label class=\"text-[#515251] mb-2 inline-block\">{{ label }}</label>\n    <div class=\"flex items-center gap-4\">\n      <div v-for=\"i in length\" :key=\"`input-${i}`\" class=\"flex-1\">\n        <input :data-key=\"i - 1\" v-model=\"input[i - 1]\" @paste=\"handlePaste($event, i - 1)\" :maxlength=\"1\" type=\"text\"\n          ref=\"inputRefs\" @keydown=\"handleKeyDown($event, i - 1)\" @input=\"handleInput($event, i - 1)\" class=\"\" />\n      </div>\n    </div>\n    <div class=\"pin-input-error\" v-if=\"errorFeedback\">\n      {{ errorFeedback }}\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.pin-input {\n  input {\n    @apply h-10 text-center px-2 w-full box-border border border-[#B5B6B5] rounded outline-none;\n\n    &:focus {\n      @apply border-[#11453B];\n    }\n  }\n\n  &.error {\n    input {\n      @apply border-[#EA4E4B];\n    }\n  }\n}\n\n.pin-input-error {\n  @apply text-[#EA4E4B] text-sm mt-2;\n}\n</style>\n","<template>\n  <div>\n    <form @submit.prevent=\"handleSubmit\">\n      <p class=\"mb-8 text-center text-[#292A29] font-bold\">\n        Weâ€™ve sent OTP to your mail and phone number.\n      </p>\n\n      <div class=\"grid gap-6 mb-6\">\n        <PinInput :length=\"6\" label=\"OTP\" @change=\"otp = $event\" :error=\"error\" />\n        <!-- <PinInput :length=\"6\" label=\"Phone Number OTP\" @change=\"phoneOtp = $event\" /> -->\n      </div>\n      <div class=\"flex justify-between items-center mb-8\">\n        <button type=\"button\" :disabled=\"!canResend\" @click=\"resendOtp\"\n          class=\"text-[#EA4E4B] disabled:opacity-50 tracking-[0.25px] text-sm\">\n          Resend\n        </button>\n        <div class=\"text-sm font-bold\">\n          <span class=\"time-left\">{{ timeLeft.minutes }}</span>\n          <span class=\"text-base inline-block mx-1\">:</span>\n          <span class=\"time-left\">{{ timeLeft.seconds }}</span>\n        </div>\n      </div>\n\n      <easiButton2 :is-loading=\"loading\" block type=\"submit\">Submit</easiButton2>\n    </form>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed, onUnmounted } from 'vue'\nimport PinInput from './PinInput.vue'\n\nconst RESEND_INTERVAL_SECONDS = 180 // seconds\n\ndefineProps(['loading', 'error'])\nconst emit = defineEmits(['submit'])\n\nconst secondsLeft = ref(RESEND_INTERVAL_SECONDS)\nconst canResend = ref(false)\nconst otp = ref('')\n\nconst handleSubmit = () => {\n  emit('submit', otp.value)\n}\n\nlet interval\n\nconst startTimer = () => {\n  secondsLeft.value = RESEND_INTERVAL_SECONDS\n  canResend.value = false\n  interval = setInterval(() => {\n    secondsLeft.value = secondsLeft.value - 1\n    if (secondsLeft.value === 0) {\n      clearInterval(interval)\n      canResend.value = true\n    }\n  }, 1000)\n}\n\nonMounted(() => {\n  startTimer()\n})\n\nonUnmounted(() => {\n  clearInterval(interval)\n})\n\nconst timeLeft = computed(() => {\n  let minutes = parseInt(secondsLeft.value / 60)\n  let seconds = secondsLeft.value % 60\n\n  minutes = minutes.toString().padStart(2, '0')\n  seconds = seconds.toString().padStart(2, '0')\n\n  return { minutes, seconds }\n})\n\nconst resendOtp = () => {\n  startTimer()\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.time-left {\n  @apply inline-block py-1 px-2 bg-gray-200 rounded-md text-sm;\n  color: #515251;\n  font-weight: 500;\n}\n</style>\n","<script></script>\n\n<template>\n    <svg width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n            d=\"M2.66663 14.2005C2.66663 12.3596 5.05444 10.8672 7.99996 10.8672C10.9455 10.8672 13.3333 12.3596 13.3333 14.2005\"\n            stroke=\"#8D8E8D\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n        <path\n            d=\"M7.99996 8.86686C9.84091 8.86686 11.3333 7.37448 11.3333 5.53353C11.3333 3.69258 9.84091 2.2002 7.99996 2.2002C6.15901 2.2002 4.66663 3.69258 4.66663 5.53353C4.66663 7.37448 6.15901 8.86686 7.99996 8.86686Z\"\n            stroke=\"#8D8E8D\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n    </svg>\n</template>\n\n\n","<script setup>\nimport { computed, ref } from 'vue'\nimport FramedQuote from './Frame.vue'\n\nimport OTPForm from './OTPForm.vue'\n\nimport PersonIcon from './PersonIcon.vue'\nimport { useDataStore } from '@/stores/data.js'\nimport { useRouter } from 'vue-router'\n\nconst store = useDataStore()\n\nconst loading = ref(false)\nconst showOtp = ref(false)\nconst router = useRouter()\nconst email = ref('')\n\nconst loginError = ref('')\nconst otpError = ref(false)\n\nconst handleLogin = async () => {\n  loginError.value = ''\n  // const enteredEmail = email.value\n\n  const data = {\n    input: {\n      email: email.value,\n      loginWith: 'EMAIL',\n      rememberMe: true\n    }\n  }\n\n  loading.value = true\n\n  try {\n    let res = await store.mutate({\n      endpoint: 'EaziAdminLogin',\n      data\n    })\n\n    loading.value = false\n    showOtp.value = true\n\n    localStorage.setItem('token', res.token)\n    localStorage.setItem('userEmail', email.value)\n\n    email.value = ''\n  } catch (err) {\n    loading.value = false\n    console.log(err)\n    loginError.value = err.message ?? 'error occurred'\n  }\n}\n\nconst verifyOtp = async (otp) => {\n  const reference = localStorage.getItem('token')\n  const value = localStorage.getItem('userEmail')\n\n  const payload = {\n    reference,\n    value,\n    code: otp\n  }\n  loading.value = true\n  try {\n    otpError.value = null\n    let res = await store.mutate({\n      endpoint: 'ConfirmLoginOtp',\n      data: { input: payload }\n    })\n\n    if (res.success !== true) {\n      throw new Error('Invalid Token. The token you provided is not valid or has expired')\n    }\n    loading.value = false\n    localStorage.removeItem('userEmail')\n    let { token } = res;\n    if (token) {\n      localStorage.setItem('token', res.token)\n    }\n    localStorage.setItem('userData', res.data)\n    localStorage.setItem('privileges', res.privileges)\n\n    await queryUser()\n    router.push('/admin/dashboard')\n  } catch (err) {\n    loading.value = false\n    otpError.value = err.message ?? 'error occurred'\n    console.log(err)\n  }\n}\n\nconst queryUser = async () => {\n  try {\n    let res = await store.query({\n      endpoint: 'GetMyProfile',\n      storeKey: 'user'\n    })\n    console.log(res)\n  } catch (err) {\n    console.log(err)\n  }\n}\n</script>\n\n<template>\n  <div class=\"grid lg:grid-cols-2 h-screen overflow-hidden\">\n    <aside class=\"bg-primary hidden lg:block overflow-auto relative\">\n      <img src=\"./assets/curve.svg?url\" class=\"absolute bottom-4 w-full left-0\" />\n      <div class=\"w-8/12 mx-auto mt-40 py-8 relative\">\n        <FramedQuote>\n          Do what you do so well that customers will want to use it again and bring their friends.\n        </FramedQuote>\n      </div>\n    </aside>\n    <div class=\"h-full overflow-auto bg-[#F0F7EB]\">\n      <main class=\"mt-[15vh] py-6 px-6\">\n        <div class=\"login-card max-w-[420px] shadow-sm mx-auto bg-white p-8 rounded-[40px]\">\n          <div class=\"flex justify-center mb-7 relative\">\n            <div v-if=\"showOtp\" class=\"absolute left-0 top-0 bottom-0 inline-grid place-items-center\">\n              <button @click=\"showOtp = false\">\n                <img src=\"@/assets/icons/arrow-left.svg?url\" />\n              </button>\n            </div>\n            <div>\n              <img src=\"@/assets/logo/new-logo-green.svg?url\" />\n            </div>\n          </div>\n\n          <!-- otp step -->\n          <OTPForm v-if=\"showOtp\" :loading=\"loading\" @submit=\"verifyOtp\" :error=\"otpError\">\n          </OTPForm>\n\n          <form v-else @submit.prevent=\"handleLogin\">\n            <p class=\"mb-8 text-center text-[#292A29] font-bold\">Please input your username</p>\n            <div class=\"mb-6\">\n              <easiTextInput v-model=\"email\" type=\"email\" label=\"Email\" autofocus required :error=\"loginError\">\n                <template #append>\n                  <PersonIcon />\n                </template>\n              </easiTextInput>\n            </div>\n            <easiButton2 block :is-loading=\"loading\"> Take me in </easiButton2>\n          </form>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.pin-input-label {\n  @apply text-[#515251] leading-[24px] font-medium;\n}\n\n.login-card {\n  animation: loginCardSlideIn 0.5s ease;\n}\n\n@keyframes loginCardSlideIn {\n  0% {\n    transform: translateX(24px);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translateX(0px);\n    opacity: 1;\n  }\n}\n</style>\n"],"names":["_imports_0$1","_imports_1$1","_imports_0","_imports_1","_imports_2","_imports_3","_createElementVNode","_hoisted_3","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","input","ref","props","inputRefs","errorFeedback","computed","BACKSPACE_KEY","ARROWLEFT","ARROWRIGHT","emitChange","emit","handleKeyDown","event","index","keyPressed","nextTarget","prevTarget","prevValue","handleInput","value","handlePaste","pastedText","start","newValue","secondsLeft","canResend","otp","handleSubmit","interval","startTimer","onMounted","onUnmounted","timeLeft","minutes","seconds","resendOtp","_hoisted_4","store","useDataStore","loading","showOtp","router","useRouter","email","loginError","otpError","handleLogin","data","res","err","verifyOtp","reference","payload","token","queryUser"],"mappings":"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"}