import{_ as q}from"./LineTab-79af4169.js";import{_ as G}from"./ReceiptFilter-8159fca1.js";import{_ as Y}from"./UploadReceipt-9feb109a.js";import{s as E,d as C,b as _,H as j,g as M,o as u,c as m,a as e,i as s,j as b,t as w,u as P,n as V,F as z,e as F,y as H,I as K,m as k,G as Q,x as B,f as J,k as W}from"./index-351c9552.js";import"./filter-835e61cc.js";const X={class:"flex flex-col gap-4"},Z={class:"flex items-center justify-between"},ee=e("h2",{class:"text-xl"},"Payroll Transaction List",-1),te=["onClick"],ae={class:"applicant-avatar"},oe=["src"],le={key:1,class:"w-full h-full bg-primary flex items-center justify-center text-white font-medium;"},se={class:"applicant-name"},ne={class:"flex items-center gap-4"},ie=["onClick"],ce={__name:"PayrollTable",props:{user:String,searchText:{type:String,default:""},transactions:{type:Array,default:()=>[]}},setup(N){const y=N;E();const L=H(),{formatAmount:O,formatDate:S,initials:T}=K,v=C(()=>y.searchText),o=C(()=>y.transactions),$=_(!1),f=_([]),g=_([]),p=_(0),d=_(10),n=t=>{p.value=t,l()},l=()=>{let t=y.transactions;f.value=t.slice(p.value*d.value,p.value*d.value+d.value),f.value.length==0&&p.value>0&&n(p.value-1)},c=t=>t?{processing:{color:"bg-[#E7F7F8]",text:"Processing"},completed:{color:"bg-[#D4FFE7]",text:"Completed"}}[t]:{color:"",text:"N/A"},D=C(()=>[{title:"View",icon:"pi pi-eye",action(t){console.log(t)}},{title:"Download",icon:"pi pi-download",action(t){console.log(t)}},{title:"Upload",icon:"pi pi-upload",action(t){$.value=!0}}]);j(v,()=>{v.value.trim()!==""?f.value=y.transactions.filter(t=>t.companyName.toLowerCase().includes(v.value.toLowerCase())):l()}),j(o,()=>{l()}),M(()=>{l()});const h=t=>{console.log(t);const i=t._id;L.push({name:"ViewReconciliation",params:{id:i}})},r=t=>{g.value.push(t.data)},A=t=>{g.value=g.value.filter(i=>i._id!==t.data._id)};return(t,i)=>{const U=k("easiPaginate"),x=k("Column"),I=k("DataTable");return u(),m(z,null,[e("div",X,[e("div",Z,[ee,s(U,{data:N.transactions,"info-only":"","onPage:update":n,currentPage:p.value,pageSize:d.value,"onUpdate:pageSize":i[0]||(i[0]=a=>d.value=a),visibleData:f.value},null,8,["data","currentPage","pageSize","visibleData"])]),s(I,{selection:g.value,"onUpdate:selection":i[1]||(i[1]=a=>g.value=a),id:"table-style",scrollable:"",value:f.value,onRowSelect:r,onRowUnselect:A},{default:b(()=>[s(x,{selectionMode:"multiple",headerStyle:"width: 2rem"}),s(x,{style:{"white-space":"nowrap"},sortable:"",field:"companyName",header:"Company Name"},{body:b(a=>[e("div",{onClick:R=>h(a.data),class:"applicant"},[e("div",null,[e("div",ae,[a.data.logo?(u(),m("img",{key:0,src:a.data.logo,alt:"",class:"object-cover h-full w-full"},null,8,oe)):(u(),m("span",le,w(P(T)(a.data.companyName)),1))])]),e("div",se,w(a.data.companyName),1)],8,te)]),_:1}),s(x,{sortable:"",field:"emplyeesPaid",header:"Â No. Employees Paid"}),s(x,{sortable:"",field:"amountPaid",header:"Amount Paid"},{body:b(a=>[e("div",null,w(P(O)(a.data.amount)),1)]),_:1}),s(x,{sortable:"",field:"status",header:"Status"},{body:b(a=>[e("div",{class:V(["py-2 w-fit px-3 text-center rounded-full",c(a.data.status).color])},w(c(a.data.status).text),3)]),_:1}),s(x,{sortable:"",style:{"white-space":"nowrap"},field:"date",header:"Date"},{body:b(a=>[e("div",null,w(P(S)(a.data.date)),1)]),_:1}),s(x,{header:"Action"},{body:b(a=>[e("div",ne,[(u(!0),m(z,null,F(P(D),R=>(u(),m("span",{onClick:he=>R.action(a.data),key:R.title,class:"cursor-pointer hover:text-primary"},[e("i",{class:V([R.icon])},null,2)],8,ie))),128))])]),_:1})]),_:1},8,["selection","value"]),s(U,{data:N.transactions,"onPage:update":n,currentPage:p.value,pageSize:d.value,"onUpdate:pageSize":i[2]||(i[2]=a=>d.value=a),visibleData:f.value},null,8,["data","currentPage","pageSize","visibleData"])]),s(Y,{isOpen:$.value,onClose:i[3]||(i[3]=a=>$.value=!1)},null,8,["isOpen"])],64)}}},re={class:"flex flex-col gap-8"},ue={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},de=e("h2",{class:"text-2xl font-medium"},"Payroll Receipt",-1),pe={class:"flex items-center gap-4"},me={class:"flex flex-col gap-3"},ve={class:"flex flex-col sm:flex-row sm:items-center gap-4 justify-between"},fe={class:"flex items-center gap-4 gap-2 md:gap-4 flex-wrap"},_e=["onClick"],ye={class:"text-dark-500 text-xs"},ge={class:"flex items-center gap-2 w-full sm:w-6/12 md:w-5/12"},Se={__name:"Payroll",setup(N){const y=E(),{query:L,mutate:O}=y;Q();const S=_(!1),T=_(""),v=_([]),o=C(()=>y.getPayrollReceipt),$=C(()=>{const n=o.value&&o.value.filter(c=>c.registrationType=="COMPANY"),l=o.value&&o.value.filter(c=>c.registrationType=="PERSONAL");return[{title:"All",value:o.value&&o.value.length},{title:"Company",value:n&&n.length},{title:"Personal",value:l&&l.length}]}),f=n=>{const l=o.value&&o.value.filter(h=>h.registrationType=="COMPANY"),c=o.value&&o.value.filter(h=>h.registrationType=="PERSONAL"),D={Company:l,Personal:c,All:o.value};v.value=D[n.title]},g=C(()=>[]),p=C(()=>[{title:"Download",icon:"pi pi-download",action(){console.log("Mark as True")}},{title:"Share",icon:"pi pi-share-alt",action(){console.log("Share")}},{title:"Print",icon:"pi pi-print",action(){console.log("Print")}}]);j(o,()=>{v.value=o.value}),M(()=>{v.value=o.value});const d=async n=>{try{S.value=!0;const l={pagination:{page:9,limit:null},filter:{company:"ASC",amount:null}};console.log(n);const c=await L({endpoint:"GetPayrollReceipt",payload:{input:n||l},storeKey:"payrollReceipt"});S.value=!1}catch(l){S.value=!1,console.log(l.message)}};return d(),(n,l)=>{const c=k("easiButton"),D=k("easiSearch"),h=k("easiLoader");return u(),m("main",re,[e("div",ue,[de,e("div",pe,[(u(!0),m(z,null,F(P(p),(r,A)=>(u(),B(c,{key:`button-${A}`,onClick:r.action,variant:"outlined",class:"flex items-center gap-2"},{default:b(()=>[e("i",{class:V([r.icon])},null,2),W(" "+w(r.title),1)]),_:2},1032,["onClick"]))),128))])]),e("div",me,[s(q,{tabItems:P($),onOnSetActive:f},null,8,["tabItems"]),e("div",ve,[e("div",fe,[(u(!0),m(z,null,F(P(g),(r,A)=>(u(),m("button",{onClick:r.action,key:`btn-${A}`,class:"border border-dark-200 rounded-full px-2 py-[1.5px] hover:opacity-70"},[e("i",{class:V([r.icon,"text-xs text-dark-500 mr-1"])},null,2),e("span",ye,w(r.title),1)],8,_e))),128))]),e("div",ge,[s(D,{modelValue:T.value,"onUpdate:modelValue":l[0]||(l[0]=r=>T.value=r),class:"grow"},null,8,["modelValue"]),s(G,{onQuery:d})])])]),s(ce,{searchText:T.value,transactions:v.value},null,8,["searchText","transactions"]),S.value?(u(),B(h,{key:0})):J("",!0)])}}};export{Se as default};
//# sourceMappingURL=Payroll-882fb843.js.map
