{"version":3,"file":"ReceiptFilter-8159fca1.js","sources":["../../src/views/receipt/shared/ReceiptFilter.vue"],"sourcesContent":["<template>\n  <div ref=\"filter\" class=\"relative\">\n    <div\n      @click=\"toggleFilter = true\"\n      class=\"flex items-center justify-between gap-2 rounded-lg bg-newGrey p-2 cursor-pointer\"\n    >\n      <div class=\"flex items-center gap-1\">\n        <span class=\"text-dark-700\">Filter</span>\n        <span v-if=\"activeFilter\" class=\"w-fit truncate w-fit font-medium text-sm text-dark-900\">{{\n          activeFilter\n        }}</span>\n      </div>\n      <div class=\"w-6\">\n        <img :src=\"filterIcon\" alt=\"\" />\n      </div>\n\n      <div\n        v-if=\"toggleFilter\"\n        :class=\"filterPositionClasses\"\n        class=\"absolute h-56 w-52 rounded-xl overflow-hidden overflow-y-auto right-0 shadow-lg bg-white flex flex-col text-sm\"\n        style=\"z-index: 2\"\n      >\n        <div\n          v-show=\"option.show\"\n          class=\"border-b last:border-b-0\"\n          v-for=\"option in filterOptions\"\n          :key=\"option.name\"\n          @click=\"filterFuction(option)\"\n        >\n          <div\n            class=\"flex items-center gap-3 cursor-pointer px-4 py-2 hover:bg-primary-hover hover:text-white\"\n          >\n            <span>{{ option.name }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div\n    @click=\"toggleFilter = false\"\n    :class=\"!toggleFilter ? 'pointer-events-none' : ''\"\n    class=\"bg-transparent fixed inset-0\"\n  ></div>\n</template>\n\n<script setup>\nimport filterIcon from '@/assets/icons/filter.svg?url'\nimport { ref, reactive, computed } from 'vue'\nimport { useRoute } from 'vue-router'\n\nconst route = useRoute()\n\nconst emit = defineEmits(['query'])\n\nconst activeFilter = ref('')\nconst toggleFilter = ref(false)\nconst filter = ref(null)\n\nconst compliancePage = computed(() => {\n  return route.path.includes('compliance') ? true : false\n})\nconst chargesPage = computed(() => {\n  return route.path.includes('charges') ? true : false\n})\n\nconst payload = reactive({\n  pagination: {\n    page: null,\n    limit: 1000\n  },\n  filter: {\n    company: null,\n    amount: null\n  }\n})\n\nif (compliancePage.value) {\n  payload.filter.type = null\n}\n\nconsole.log(payload)\n\nconst filterOptions = reactive([\n  {\n    name: 'All',\n    value: 'all',\n    type: 'all',\n    show: true\n  },\n  {\n    name: 'A - Z',\n    value: 'ASC',\n    type: 'company',\n    show: true\n  },\n\n  {\n    name: 'Z - A',\n    value: 'DESC',\n    type: 'company',\n    show: true\n  },\n  {\n    name: 'Type',\n    value: null,\n    type: 'type',\n    show: compliancePage.value\n  },\n  // {\n  //   name: 'Amount',\n  //   value: 'ASC',\n  //   type: 'amount',\n  //   show: true\n  // },\n  {\n    name: 'Date',\n    value: 'ASC',\n    type: 'date',\n    show: true\n  },\n  {\n    name: 'Completed',\n    value: 'completed',\n    type: 'status',\n    show: true\n  },\n\n  {\n    name: 'Highest Transaction',\n    value: 'DESC',\n    type: 'amount',\n    show: true\n  },\n  {\n    name: 'Lowest Transaction',\n    value: 'ASC',\n    type: 'amount',\n    show: true\n  }\n])\n\nconst filterFuction = async (arg) => {\n  toggleFilter.value = true\n  clearFilter()\n  if (arg.type == 'all') {\n    toggleFilter.value = false\n    // clearFilter()\n  } else if (arg.type == 'status') {\n    // clearFilter()\n  } else {\n    payload.filter[arg.type] = arg.value\n  }\n  console.log(payload)\n  await emit('query', payload)\n  activeFilter.value = arg.name\n}\n\nconst filterPositionClasses = computed(() => {\n  if (!toggleFilter.value || !filter.value) {\n    return ''\n  }\n  const filterRect = filter.value.getBoundingClientRect()\n  const screenHeight = window.innerHeight\n  const isNearBottom = filterRect.bottom > screenHeight - 200\n\n  console.log(filterRect.bottom, screenHeight - 200)\n\n  return isNearBottom ? 'bottom-12' : 'top-14'\n})\n\nconst clearFilter = () => {\n  payload.pagination = {\n    page: null,\n    limit: 1000\n  }\n  payload.filter = {\n    company: null,\n    amount: null\n  }\n\n  if (compliancePage.value) {\n    payload.filter.type = null\n  }\n}\n</script>\n\n<style></style>\n"],"names":["route","useRoute","activeFilter","ref","toggleFilter","filter","compliancePage","computed","payload","reactive","filterOptions","filterFuction","arg","clearFilter","emit","filterPositionClasses","filterRect","screenHeight","isNearBottom"],"mappings":"0hBAmDA,MAAMA,EAAQC,EAAU,EAIlBC,EAAeC,EAAI,EAAE,EACrBC,EAAeD,EAAI,EAAK,EACxBE,EAASF,EAAI,IAAI,EAEjBG,EAAiBC,EAAS,IACvB,EAAAP,EAAM,KAAK,SAAS,YAAY,CACxC,EACmBO,EAAS,IACpB,EAAAP,EAAM,KAAK,SAAS,SAAS,CACrC,EAED,MAAMQ,EAAUC,EAAS,CACvB,WAAY,CACV,KAAM,KACN,MAAO,GACR,EACD,OAAQ,CACN,QAAS,KACT,OAAQ,IACT,CACH,CAAC,EAEGH,EAAe,QACjBE,EAAQ,OAAO,KAAO,MAGxB,QAAQ,IAAIA,CAAO,EAEnB,MAAME,EAAgBD,EAAS,CAC7B,CACE,KAAM,MACN,MAAO,MACP,KAAM,MACN,KAAM,EACP,EACD,CACE,KAAM,QACN,MAAO,MACP,KAAM,UACN,KAAM,EACP,EAED,CACE,KAAM,QACN,MAAO,OACP,KAAM,UACN,KAAM,EACP,EACD,CACE,KAAM,OACN,MAAO,KACP,KAAM,OACN,KAAMH,EAAe,KACtB,EAOD,CACE,KAAM,OACN,MAAO,MACP,KAAM,OACN,KAAM,EACP,EACD,CACE,KAAM,YACN,MAAO,YACP,KAAM,SACN,KAAM,EACP,EAED,CACE,KAAM,sBACN,MAAO,OACP,KAAM,SACN,KAAM,EACP,EACD,CACE,KAAM,qBACN,MAAO,MACP,KAAM,SACN,KAAM,EACP,CACH,CAAC,EAEKK,EAAgB,MAAOC,GAAQ,CACnCR,EAAa,MAAQ,GACrBS,EAAa,EACTD,EAAI,MAAQ,MACdR,EAAa,MAAQ,GAEZQ,EAAI,MAAQ,WAGrBJ,EAAQ,OAAOI,EAAI,IAAI,EAAIA,EAAI,OAEjC,QAAQ,IAAIJ,CAAO,EACnB,MAAMM,EAAK,QAASN,CAAO,EAC3BN,EAAa,MAAQU,EAAI,IAC3B,EAEMG,EAAwBR,EAAS,IAAM,CAC3C,GAAI,CAACH,EAAa,OAAS,CAACC,EAAO,MACjC,MAAO,GAET,MAAMW,EAAaX,EAAO,MAAM,sBAAuB,EACjDY,EAAe,OAAO,YACtBC,EAAeF,EAAW,OAASC,EAAe,IAExD,eAAQ,IAAID,EAAW,OAAQC,EAAe,GAAG,EAE1CC,EAAe,YAAc,QACtC,CAAC,EAEKL,EAAc,IAAM,CACxBL,EAAQ,WAAa,CACnB,KAAM,KACN,MAAO,GACR,EACDA,EAAQ,OAAS,CACf,QAAS,KACT,OAAQ,IACT,EAEGF,EAAe,QACjBE,EAAQ,OAAO,KAAO,KAE1B"}