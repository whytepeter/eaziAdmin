import{s as T,G as M,b as A,d as O,o as i,c as f,a as o,t as k,u as w,i as u,j as _,x as $,f as V,F as S,I as j,m as g,D as E,H as K,l as H,k as I}from"./index-351c9552.js";import{C as R}from"./CopyIcon-0dbe4dba.js";const z="/assets/camera-44ae2e29.svg";const J={class:"relative overflow-hidden h-72 w-52 max-w-full rounded-xl bg-primary flex-shrink-0 flex items-center justify-center"},Q=["src"],W={key:1,class:"font-bold text-white text-7xl"},X={class:"photo-gradient w-full absolute left-0 bottom-0 flex items-center justify-center gap-4 p-4"},Y=o("div",{class:"flex-shrink-0 w-12 h-9 cursor-pointer border border-white rounded-full flex items-center justify-center"},[o("i",{class:"pi pi-times text-white text-sm"})],-1),Z={class:"flex-shrink-0 w-12 h-9 cursor-pointer bg-primary rounded-full flex items-center justify-center"},ee=["src"],pe={__name:"ProfilePic",props:{profile:{type:Boolean,default:!1},user:Object},setup(s){const r=s,{initials:c}=j,p=T(),{query:b,mutate:U}=p,v=M(),d=A(!1),P=O(()=>{if(r.user)return`${r.user.firstName} ${r.user.lastName}`}),C=async e=>{try{const a={firstName:r.user.firstName,lastName:r.user.lastName,id:r.user._id,email:r.user.email,pfp:e};d.value=!0,console.log(a);const m=await U({endpoint:"UpdateAnAdminUser",data:{input:a}});console.log(m),d.value=!1,m.success?(r.profile?y():h(),v.success("Profile photo successfully updated")):v.error(m.message)}catch(a){d.value=!1,console.log(a.message)}},y=async()=>{try{await b({endpoint:"GetMyProfile",storeKey:"user"})}catch(e){console.log(e.message)}},h=async()=>{try{await b({endpoint:"GetAdminUsers",payload:{input:{addedBy:null}},storeKey:"adminUsers"})}catch(e){console.log(e.message)}};return(e,a)=>{const m=g("easiEditor"),x=g("easiLoader");return i(),f(S,null,[o("div",J,[s.user&&s.user&&s.user.pfp?(i(),f("img",{key:0,src:s.user&&s.user.pfp,alt:"",class:"h-full w-full object-cover"},null,8,Q)):(i(),f("span",W,k(w(c)(w(P))),1)),o("div",X,[Y,u(m,{onCropped:C},{default:_(()=>[o("div",Z,[o("img",{src:w(z),alt:"",class:"w-5"},null,8,ee)])]),_:1})])]),d.value?(i(),$(x,{key:0})):V("",!0)],64)}}},se={class:"flex items-center gap-2"},te={class:"w-9 h-9 flex-shrink-0 flex items-center justify-center bg-tertiary rounded-full"},ae=["src"],le={class:"grow flex flex-col leading-5"},oe={class:"text-dark-700 text-sm"},re={key:0,class:""},ne=["href"],ye={__name:"DetailsCard",props:{data:{type:Object,default:()=>({})}},setup(s){const{copyText:r}=j;return(c,p)=>(i(),f("div",se,[o("div",te,[o("img",{src:s.data&&s.data.icon,alt:""},null,8,ae)]),o("div",le,[o("span",oe,k(s.data&&s.data.title),1),s.data&&!s.data.link?(i(),f("span",re,k(s.data&&s.data.value),1)):(i(),f("a",{key:1,target:"_blank",href:s.data&&s.data.link,class:"text-[#359AA0] underline"},k(s.data&&s.data.value),9,ne))]),s.data&&s.data.copy?(i(),$(R,{key:0,onClick:p[0]||(p[0]=b=>w(r)(s.data.link)),class:"w-5 flex-shrink-0 cursor-pointer"})):V("",!0)]))}},ie={class:"p-6 flex flex-col gap-4 sm:gap-6"},ce=o("div",{class:"text-2xl"},"Edit Profile",-1),ue=["onSubmit"],de={class:"grid grid-cols-2 gap-4 items-center place-content-center"},he={__name:"EditProfile",props:{isOpen:{type:Boolean,default:!1},user:{type:Object,default:()=>({})}},emits:["close","complete"],setup(s,{emit:r}){const c=s,p=T(),{query:b,mutate:U}=p,v=M(),{processNumber:d,validateEmail:P}=j,C=O(()=>c.user),y=A(!1),h=A(!1),e=E({firstName:"",lastName:"",email:"",phoneNumber:"",address:"",accountType:"",id:""}),a=E({firstName:!1,lastName:!1,email:!1,phoneNumber:!1,address:!1}),m=()=>{e.id="",e.firstName="",e.lastName="",e.email="",e.phoneNumber="",e.address="",e.accountType=""};function x(){m();const l=["firstName","lastName","email","phoneNumber","address","accountType"];for(let t=0;t<l.length;t++)c.user&&c.user[l[t]]&&(e[l[t]]=c.user[l[t]]);console.log(c.user)}x(),K(C,()=>{x()});function q(){let l=isNaN(e.phoneNumber.trim())||d(e.phoneNumber)&&d(e.phoneNumber).length!==13;return e.firstName.trim()===""?(a.firstName="Please fill in your first name",!1):e.lastName.trim()===""?(a.lastName="Please fill in your last name",!1):e.email.trim()===""?(a.email="Please fill in your email address",!1):P(e.email)?e.phoneNumber.trim()===""?(a.phoneNumber="Please fill in your phone number",!1):l!==!1?(a.phoneNumber="Phone number badly formatted",!1):e.address.trim()===""?(a.address="Please fill in your company",!1):(Object.keys(a).forEach(t=>{a[t]=!1}),!0):(a.email="Email is badly formated",!1)}const F=async()=>{if(q()){e.id=c.user._id,console.log(e);try{y.value=!0;const l=await U({endpoint:"UpdateAnAdminUser",data:{input:e}});console.log(l),y.value=!1,l.success?(r("close"),h.value=!0,L(),r("complete"),setTimeout(()=>{h.value=!1},3e3)):v.error(l.message)}catch(l){y.value=!1,console.log(l.message)}}},L=async()=>{try{await b({endpoint:"GetAdminUsers",payload:{input:{addedBy:null}},storeKey:"adminUsers"})}catch(l){console.log(l.message)}};return(l,t)=>{const N=g("easiTextInput"),B=g("easiButton"),D=g("easiModal"),G=g("easiAlert");return i(),f(S,null,[s.isOpen?(i(),$(D,{key:0,persistence:"",onClose:t[6]||(t[6]=n=>l.$emit("close"))},{default:_(()=>[o("div",ie,[ce,o("form",{onSubmit:H(F,["prevent"]),ref:"form",autocomplete:"on",class:"flex flex-col gap-6"},[u(N,{modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=n=>e.firstName=n),label:"First Name",error:a.firstName},null,8,["modelValue","error"]),u(N,{modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=n=>e.lastName=n),label:"Last Name",error:a.lastName},null,8,["modelValue","error"]),u(N,{modelValue:e.email,"onUpdate:modelValue":t[2]||(t[2]=n=>e.email=n),type:"email",inputmode:"email",label:"Email",error:a.email},null,8,["modelValue","error"]),u(N,{modelValue:e.phoneNumber,"onUpdate:modelValue":t[3]||(t[3]=n=>e.phoneNumber=n),type:"tel",inputmode:"numeric",label:"Phone Number",error:a.phoneNumber},null,8,["modelValue","error"]),u(N,{modelValue:e.address,"onUpdate:modelValue":t[4]||(t[4]=n=>e.address=n),label:"Address",error:a.address},null,8,["modelValue","error"]),o("div",de,[u(B,{onClick:t[5]||(t[5]=n=>l.$emit("close")),variant:"outlined",block:""},{default:_(()=>[I("Cancel")]),_:1}),u(B,{loading:y.value,type:"submit",block:""},{default:_(()=>[I("Submit")]),_:1},8,["loading"])])],40,ue)])]),_:1})):V("",!0),h.value?(i(),$(G,{key:1,persistence:!1,onClose:t[7]||(t[7]=n=>h.value=!1),caption:"Update Successful"})):V("",!0)],64)}}},ge="/assets/call-ce15987c.svg",be="/assets/mail-c41929d8.svg",Ne="/assets/user-check-f78e61cb.svg",ve="/assets/location-46994781.svg";export{ge as C,ve as L,be as M,Ne as U,pe as _,he as a,ye as b};
//# sourceMappingURL=location-8b461d59.js.map
