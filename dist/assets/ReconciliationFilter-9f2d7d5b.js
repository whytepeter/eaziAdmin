import{f as N}from"./filter-835e61cc.js";import{s as R,b as i,d as w,D as $,o as r,c as u,a as n,t as b,f as h,u as g,n as p,F as k,e as z,i as C,j as E,k as H,m as D}from"./index-351c9552.js";const j={class:"flex items-center gap-1"},q=n("span",{class:"text-dark-700"},"Filter",-1),G={key:0,class:"w-fit truncate w-fit font-medium text-sm text-dark-900"},M={class:"w-6"},O=["src"],Z=["onClick"],K={key:0,class:"flex flex-col gap-2 px-2 pt-0 pb-3"},Q={__name:"ReconciliationFilter",emits:["loading"],setup(P,{emit:d}){const V=R(),{query:F,mutate:U}=V,m=i(""),l=i(!1),f=i(null),c=i(null),v=i(null),S=w(()=>new Date().toISOString().slice(0,7)),o=i({filter:{company:null,month:null,reconciliationValue:null,transaction:null,year:null},pagination:{limit:1e3,page:null}}),B=$([{name:"All",value:"all",type:"all"},{name:"A - Z",value:"ASC",type:"company"},{name:"Z - A",value:"DESC",type:"company"},{name:"True",value:!0,type:"reconciliationValue"},{name:"False",value:!1,type:"reconciliationValue"},{name:"Month",value:null,type:"month"},{name:"Year",value:null,type:"year"},{name:"Highest Transaction",value:"DESC",type:"transaction"},{name:"Lowest Transaction",value:"ASC",type:"transaction"}]),I=async e=>{if(l.value=!0,e.type=="all")x(),l.value=!1;else{if(e.type=="month"||e.type=="year")return c.value=e.type,!1;x(),o.value.filter[e.type]=e.value}l.value=!1,await _(),m.value=e.name},x=()=>{o.value.filter={company:null,month:null,reconciliationValue:null,transaction:null,year:null}},T=async e=>{const t=v.value.split("-")[0],s=v.value.split("-")[1];console.log(s,t),e.type=="month"?(o.value.filter.month=parseInt(s),console.log(o.value,s)):(o.value.filter.year=parseInt(t),console.log(o.value,t)),await _(),v.value=null,m.value=e.name,l.value=!1,c.value=null},A=w(()=>{if(!l.value||!f.value)return"";const e=f.value.getBoundingClientRect(),t=window.innerHeight,s=e.bottom>t-200;return console.log(e.bottom,t-200),s?"bottom-12":"top-14"}),_=async()=>{console.log(o.value);try{d("loading",!0);const e=await F({endpoint:"GetReconciliationList",payload:{input:o.value},storeKey:"reconciliationList"});d("loading",!1)}catch(e){d("loading",!1),console.log(e.message)}};return(e,t)=>{const s=D("easiTextInput"),L=D("easiButton");return r(),u(k,null,[n("div",{ref_key:"filter",ref:f,class:"relative"},[n("div",{onClick:t[1]||(t[1]=a=>l.value=!0),class:"flex items-center justify-between gap-2 rounded-lg bg-newGrey p-2 cursor-pointer"},[n("div",j,[q,m.value?(r(),u("span",G,b(m.value),1)):h("",!0)]),n("div",M,[n("img",{src:g(N),alt:""},null,8,O)]),l.value?(r(),u("div",{key:0,class:p([g(A),"absolute h-56 w-52 rounded-xl overflow-hidden overflow-y-auto right-0 shadow-lg bg-white flex flex-col text-sm"]),style:{"z-index":"2"}},[(r(!0),u(k,null,z(B,a=>(r(),u("div",{class:p([c.value==a.type?"bg-highlight":"","border-b","last:border-b-0"]),key:a.name,onClick:y=>I(a)},[n("div",{class:p([[c.value!==a.type?"hover:bg-primary-hover hover:text-white":""],"flex items-center gap-3 cursor-pointer px-4 py-2"])},[n("span",null,b(a.name),1)],2),c.value==a.type?(r(),u("div",K,[C(s,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=y=>v.value=y),placeholder:"Month",type:"month",max:g(S),inputmode:"date"},null,8,["modelValue","max"]),C(L,{onClick:y=>T(a),size:"small",block:""},{default:E(()=>[H("Submit")]),_:2},1032,["onClick"])])):h("",!0)],10,Z))),128))],2)):h("",!0)])],512),n("div",{onClick:t[2]||(t[2]=a=>l.value=!1),class:p([l.value?"":"pointer-events-none","bg-transparent fixed inset-0"])},null,2)],64)}}};export{Q as _};
//# sourceMappingURL=ReconciliationFilter-9f2d7d5b.js.map
