import{_ as j,a as I}from"./InflowOutflowCard-2182a55f.js";import{_ as U}from"./LineTab-79af4169.js";import{_ as F}from"./ReconciliationFilter-9f2d7d5b.js";/* empty css                                                                        */import{s as M,d as w,b as g,H as D,g as N,o as v,c as k,a as l,x as L,f as P,i as n,j as m,t as h,u as r,n as O,y as q,I as E,m as C,G,F as K,e as Y}from"./index-351c9552.js";import"./filter-835e61cc.js";const H={class:"flex flex-col gap-4"},W={class:"flex items-center justify-between"},J=l("h2",{class:"text-xl"},"Reconciliation List",-1),Q={class:"applicant"},X={class:"applicant-avatar"},Z=["src"],ee={key:1,class:"w-full h-full bg-primary flex items-center justify-center text-white font-medium;"},ae={class:"applicant-name"},te=["onClick"],le={__name:"ReconciliationList",props:{searchText:{type:String,default:""},data:{type:Array,default:()=>[]}},setup(x){const f=x;M();const $=q(),{formatAmount:T,formatDate:V,initials:R}=E,B=w(()=>f.data),_=w(()=>f.searchText),e=g([]),s=g([]),d=g(0),p=g(10),S=a=>{d.value=a,b()},b=()=>{let a=f.data;e.value=a.slice(d.value*p.value,d.value*p.value+p.value),e.value.length==0&&d.value>0&&S(d.value-1)};D(_,()=>{_.value.trim()!==""?e.value=f.data.filter(a=>a.company.toLowerCase().includes(_.value.toLowerCase())):b()}),D(B,()=>{b()}),N(()=>{b()});const z=a=>{console.log(a);const c=a._id;$.push({name:"ViewReconciliation",params:{id:c}})},i=a=>{s.value.push(a.data)},u=a=>{s.value=s.value.filter(c=>c._id!==a.data._id)};return(a,c)=>{const y=C("easiPaginate"),o=C("Column"),A=C("DataTable");return v(),k("div",H,[l("div",W,[J,x.data.length?(v(),L(y,{key:0,data:x.data,"info-only":"","onPage:update":S,currentPage:d.value,pageSize:p.value,"onUpdate:pageSize":c[0]||(c[0]=t=>p.value=t),visibleData:e.value},null,8,["data","currentPage","pageSize","visibleData"])):P("",!0)]),n(A,{selection:s.value,"onUpdate:selection":c[1]||(c[1]=t=>s.value=t),id:"table-style",scrollable:"",value:e.value,onRowSelect:i,onRowUnselect:u},{default:m(()=>[n(o,{selectionMode:"multiple",headerStyle:"width: 2rem"}),n(o,{style:{"white-space":"nowrap"},sortable:"",field:"company",header:"Company Name"},{body:m(t=>[l("div",Q,[l("div",null,[l("div",X,[t.data.pfp?(v(),k("img",{key:0,src:t.data.pfp,alt:"",class:"object-cover"},null,8,Z)):(v(),k("span",ee,h(r(R)(t.data.company)),1))])]),l("div",ae,h(t.data.company),1)])]),_:1}),n(o,{sortable:"",field:"totalInflow",header:"Total Inflow"},{body:m(t=>[l("div",null,h(r(T)(t.data.totalInflow)),1)]),_:1}),n(o,{sortable:"",field:"totalOutflow",header:"Total Outflow"},{body:m(t=>[l("div",null,h(r(T)(t.data.totalOutflow)),1)]),_:1}),n(o,{sortable:"",field:"walletBalance",header:"Wallet Balance"},{body:m(t=>[l("div",null,h(r(T)(t.data.walletBalance)),1)]),_:1}),n(o,{sortable:"",field:"reconciliationValue",header:"Reconciliation Value"},{body:m(t=>[l("div",{class:O([t.data.reconciliationValue?"text-success":"text-error","font-bold capitalize"])},h(t.data.reconciliationValue),3)]),_:1}),n(o,{header:"Action"},{body:m(t=>[l("button",{onClick:ve=>z(t.data),class:"px-4 text-sm text-primary rounded-full border border-primary px-4 py-1"}," View ",8,te)]),_:1})]),_:1},8,["selection","value"]),x.data.length?(v(),L(y,{key:0,data:x.data,"onPage:update":S,currentPage:d.value,pageSize:p.value,"onUpdate:pageSize":c[2]||(c[2]=t=>p.value=t),visibleData:e.value},null,8,["data","currentPage","pageSize","visibleData"])):P("",!0)])}}},oe={class:"flex flex-col gap-8"},ne={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6"},se=l("span",{class:"text-primary"},"View Statement",-1),ie={class:"mt-10 flex flex-col gap-3"},ce={class:"flex flex-col sm:flex-row sm:items-center gap-4 justify-between"},re={class:"flex items-center gap-4"},ue=["onClick"],de={class:"text-dark-500 group-hover:text-primary text-xs"},pe={class:"flex items-center gap-2 w-full sm:w-6/12 md:w-5/12"},me={class:"mt-4"},be={__name:"Index",setup(x){const f=M(),{query:$,mutate:T}=f;G();const V=g(!1),R=g(""),B=g({filter:{company:null,month:null,reconciliationValue:null,transaction:null,year:null},pagination:{limit:1e3,page:null}}),_=g([]),e=w(()=>f.getReconciliation);console.log("REconCiliation...",e.value);const s=w(()=>f.getReconciliationBalance);console.log("Balance",s.value);const d=w(()=>{const i=e.value&&e.value.filter(a=>a.registrationType=="COMPANY"),u=e.value&&e.value.filter(a=>a.registrationType=="PERSONAL");return[{title:"All",value:e.value&&e.value.length},{title:"Company",value:i&&i.length},{title:"Personal",value:u&&u.length}]}),p=i=>{const u=e.value&&e.value.filter(y=>y.registrationType=="COMPANY"),a=e.value&&e.value.filter(y=>y.registrationType=="PERSONAL"),c={Company:u,Personal:a,All:e.value};_.value=c[i.title]},S=w(()=>[{title:"Mark As True",icon:"pi pi-check",action(){console.log("Mark as True")}},{title:"Mark As False",icon:"pi pi-times",action(){console.log("Mark as False")}}]);D(e,()=>{_.value=e.value}),N(()=>{_.value=e.value});const b=async()=>{try{const i=await $({endpoint:"GetReconciliationList",payload:{input:B.value},storeKey:"reconciliationList"})}catch(i){console.log(i.message)}};return(async()=>{try{const i=await $({endpoint:"GetReconciliationBalances",storeKey:"reconciliationBalance"})}catch(i){console.log(i.message)}})(),b(),(i,u)=>{const a=C("easiButton"),c=C("easiSearch"),y=C("easiLoader");return v(),k("main",oe,[l("div",ne,[n(j,{value:r(s)&&r(s).reconciliationValue,amount:r(s)&&r(s).consolidatedBalance},{default:m(()=>[n(a,{onClick:u[0]||(u[0]=o=>i.$router.push({name:"ReconciliationStatement"})),color:"tertiary",block:""},{default:m(()=>[se]),_:1})]),_:1},8,["value","amount"]),n(I,{value:.5,amount:r(s)&&r(s).inflow,date:"last month"},null,8,["value","amount"]),n(I,{type:"outflow",value:.5,amount:r(s)&&r(s).outflow,date:"last month"},null,8,["value","amount"])]),l("div",ie,[n(U,{tabItems:r(d),onOnSetActive:p},null,8,["tabItems"]),l("div",ce,[l("div",re,[(v(!0),k(K,null,Y(r(S),(o,A)=>(v(),k("button",{onClick:o.action,key:`btn-${A}`,class:"border border-dark-200 rounded-full px-2 py-[1.5px] text-dark-5000 group hover:border-primary"},[l("i",{class:O([o.icon,"text-xs text-dark-500 group-hover:text-primary mr-1"])},null,2),l("span",de,h(o.title),1)],8,ue))),128))]),l("div",pe,[n(c,{modelValue:R.value,"onUpdate:modelValue":u[1]||(u[1]=o=>R.value=o),class:"grow"},null,8,["modelValue"]),n(F,{onLoading:u[2]||(u[2]=o=>V.value=o)})])])]),l("div",me,[n(le,{payload:B.value,data:_.value,searchText:R.value},null,8,["payload","data","searchText"])]),V.value?(v(),L(y,{key:0})):P("",!0)])}}};export{be as default};
//# sourceMappingURL=Index-de868c14.js.map
