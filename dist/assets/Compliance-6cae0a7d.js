import{_ as B}from"./LineTab-79af4169.js";import{_ as I}from"./ReceiptFilter-8159fca1.js";import{_ as G}from"./UploadReceipt-9feb109a.js";import{s as j,d as w,b as f,H as E,g as F,o as c,c as p,a as t,i as l,j as x,t as b,u as C,n as N,F as A,e as O,y as Y,I as q,m as k,G as H,x as M,f as K,k as Q}from"./index-351c9552.js";import"./filter-835e61cc.js";const J={class:"flex flex-col gap-4"},W={class:"flex items-center justify-between"},X=t("h2",{class:"text-xl"},"Compliance Transaction List",-1),Z={class:"applicant"},ee={class:"applicant-avatar"},te=["src"],ae={key:1,class:"w-full h-full bg-primary flex items-center justify-center text-white font-medium;"},oe={class:"applicant-name"},le={class:"flex items-center gap-4"},se=["onClick"],ne={__name:"ComplianceTable",props:{user:String,searchText:{type:String,default:""},transactions:{type:Array,default:()=>[]}},setup(D){const _=D;j(),Y();const{formatAmount:R,formatDate:V,initials:S}=q,g=w(()=>_.searchText),T=w(()=>_.transactions),o=f(!1),m=f([]),y=f([]),u=f(0),d=f(10),P=e=>{u.value=e,n()},n=()=>{let e=_.transactions;m.value=e.slice(u.value*d.value,u.value*d.value+d.value),m.value.length==0&&u.value>0&&P(u.value-1)},i=e=>e?{PROCESSING:{color:"bg-[#E7F7F8]",text:"Processing"},COMPLETED:{color:"bg-[#D4FFE7]",text:"Completed"}}[e]:{color:"",text:"N/A"},r=w(()=>[{title:"View",icon:"pi pi-eye",action(e){console.log(e)}},{title:"Download",icon:"pi pi-download",action(e){console.log(e)}},{title:"Upload",icon:"pi pi-upload",action(e){o.value=!0}}]);E(g,()=>{g.value.trim()!==""?m.value=_.transactions.filter(e=>e.companyName.toLowerCase().includes(g.value.toLowerCase())):n()}),E(T,()=>{n()}),F(()=>{n()});const $=e=>{y.value.push(e.data)},h=e=>{y.value=y.value.filter(s=>s._id!==e.data._id)};return(e,s)=>{const z=k("easiPaginate"),v=k("Column"),U=k("DataTable");return c(),p(A,null,[t("div",J,[t("div",W,[X,l(z,{data:D.transactions,"info-only":"","onPage:update":P,currentPage:u.value,pageSize:d.value,"onUpdate:pageSize":s[0]||(s[0]=a=>d.value=a),visibleData:m.value},null,8,["data","currentPage","pageSize","visibleData"])]),l(U,{selection:y.value,"onUpdate:selection":s[1]||(s[1]=a=>y.value=a),id:"table-style",class:"",scrollable:"",value:m.value,onRowSelect:$,onRowUnselect:h},{default:x(()=>[l(v,{selectionMode:"multiple",headerStyle:"width: 2rem"}),l(v,{style:{"white-space":"nowrap"},sortable:"",field:"companyName",header:"Company Name"},{body:x(a=>[t("div",Z,[t("div",null,[t("div",ee,[a.data.companyLogo?(c(),p("img",{key:0,src:a.data.companyLogo,alt:"",class:"object-cover h-full w-full"},null,8,te)):(c(),p("span",ae,b(C(S)(a.data.companyName)),1))])]),t("div",oe,b(a.data.companyName),1)])]),_:1}),l(v,{sortable:"",field:"complianceType",header:" COMPLAINCE TYPE"}),l(v,{sortable:"",field:"noOfemployees",header:" No. Employees Paid"}),l(v,{sortable:"",field:"amount",header:"Amount Paid"},{body:x(a=>[t("div",null,b(C(R)(a.data.amount)),1)]),_:1}),l(v,{sortable:"",field:"status",header:"Status"},{body:x(a=>[t("div",{class:N(["py-2 w-fit px-3 text-center rounded-full",i(a.data.status).color])},b(i(a.data.status).text),3)]),_:1}),l(v,{sortable:"",style:{"white-space":"nowrap"},field:"date",header:"Date"},{body:x(a=>[t("div",null,b(C(V)(a.data.date)),1)]),_:1}),l(v,{header:"Action"},{body:x(a=>[t("div",le,[(c(!0),p(A,null,O(C(r),L=>(c(),p("span",{onClick:ge=>L.action(a.data),key:L.title,class:"cursor-pointer hover:text-primary"},[t("i",{class:N([L.icon])},null,2)],8,se))),128))])]),_:1})]),_:1},8,["selection","value"]),l(z,{data:D.transactions,"onPage:update":P,currentPage:u.value,pageSize:d.value,"onUpdate:pageSize":s[2]||(s[2]=a=>d.value=a),visibleData:m.value},null,8,["data","currentPage","pageSize","visibleData"])]),l(G,{isOpen:o.value,onClose:s[3]||(s[3]=a=>o.value=!1)},null,8,["isOpen"])],64)}}},ie={class:"flex flex-col gap-8"},ce={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},re=t("h2",{class:"text-2xl font-medium"},"Compliance Receipt",-1),ue={class:"flex items-center gap-4"},de={class:"flex flex-col gap-3"},pe={class:"flex flex-col sm:flex-row sm:items-center gap-4 justify-between"},me={class:"flex items-center gap-4 gap-2 md:gap-4 flex-wrap"},ve=["onClick"],fe={class:"text-dark-500 text-xs"},_e={class:"flex items-center gap-2 w-full sm:w-6/12 md:w-5/12"},Ce={__name:"Compliance",setup(D){const _=j(),{query:R,mutate:V}=_;H();const S=f(!1),g=f(""),T=f([]),o=w(()=>_.getComplianceReceipt),m=w(()=>{const n=o.value&&o.value.filter(r=>r.registrationType=="COMPANY"),i=o.value&&o.value.filter(r=>r.registrationType=="PERSONAL");return[{title:"All",value:o.value&&o.value.length},{title:"Company",value:n&&n.length},{title:"Personal",value:i&&i.length}]}),y=n=>{const i=o.value&&o.value.filter(h=>h.registrationType=="COMPANY"),r=o.value&&o.value.filter(h=>h.registrationType=="PERSONAL"),$={Company:i,Personal:r,All:o.value};T.value=$[n.title]},u=w(()=>[]),d=w(()=>[{title:"Download",icon:"pi pi-download",action(){console.log("Mark as True")}},{title:"Share",icon:"pi pi-share-alt",action(){console.log("Share")}},{title:"Print",icon:"pi pi-print",action(){console.log("Print")}}]);E(o,()=>{T.value=o.value}),F(()=>{T.value=o.value});const P=async n=>{try{S.value=!0;const r=await R({endpoint:"GetComplianceReceipt",payload:{input:n||{pagination:{page:null,limit:1e3},filter:{company:null,amount:null,type:null}}},storeKey:"complianceReceipt"});S.value=!1}catch(i){S.value=!1,console.log(i.message)}};return P(),(n,i)=>{const r=k("easiButton"),$=k("easiSearch"),h=k("easiLoader");return c(),p("main",ie,[t("div",ce,[re,t("div",ue,[(c(!0),p(A,null,O(C(d),(e,s)=>(c(),M(r,{key:`button-${s}`,onClick:e.action,variant:"outlined",class:"flex items-center gap-2"},{default:x(()=>[t("i",{class:N([e.icon])},null,2),Q(" "+b(e.title),1)]),_:2},1032,["onClick"]))),128))])]),t("div",de,[l(B,{tabItems:C(m),onOnSetActive:y},null,8,["tabItems"]),t("div",pe,[t("div",me,[(c(!0),p(A,null,O(C(u),(e,s)=>(c(),p("button",{onClick:e.action,key:`btn-${s}`,class:"border border-dark-200 rounded-full px-2 py-[1.5px] hover:opacity-70"},[t("i",{class:N([e.icon,"text-xs text-dark-500 mr-1"])},null,2),t("span",fe,b(e.title),1)],8,ve))),128))]),t("div",_e,[l($,{modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=e=>g.value=e),class:"grow"},null,8,["modelValue"]),l(I,{onQuery:P})])])]),l(ne,{searchText:g.value,transactions:T.value},null,8,["searchText","transactions"]),S.value?(c(),M(h,{key:0})):K("",!0)])}}};export{Ce as default};
//# sourceMappingURL=Compliance-6cae0a7d.js.map
