{"version":3,"file":"Compliance-6cae0a7d.js","sources":["../../src/views/receipt/Table/ComplianceTable.vue","../../src/views/receipt/Compliance.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col gap-4\">\n    <div class=\"flex items-center justify-between\">\n      <h2 class=\"text-xl\">Compliance Transaction List</h2>\n      <easiPaginate\n        :data=\"transactions\"\n        info-only\n        @page:update=\"updatePage\"\n        :currentPage=\"currentPage\"\n        v-model:pageSize=\"pageSize\"\n        :visibleData=\"visibleData\"\n      />\n    </div>\n    <!-- removableSort -->\n    <DataTable\n      v-model:selection=\"selectedTransaction\"\n      id=\"table-style\"\n      class=\"\"\n      scrollable\n      :value=\"visibleData\"\n      @rowSelect=\"onRowSelect\"\n      @rowUnselect=\"onRowUnselect\"\n    >\n      <Column selectionMode=\"multiple\" headerStyle=\"width: 2rem\"> </Column>\n\n      <Column style=\"white-space: nowrap\" sortable field=\"companyName\" header=\"Company Name\">\n        <template #body=\"slotProps\">\n          <div class=\"applicant\">\n            <div>\n              <div class=\"applicant-avatar\">\n                <img\n                  v-if=\"slotProps.data.companyLogo\"\n                  :src=\"slotProps.data.companyLogo\"\n                  alt=\"\"\n                  class=\"object-cover h-full w-full\"\n                />\n                <span\n                  v-else\n                  class=\"w-full h-full bg-primary flex items-center justify-center text-white font-medium;\"\n                  >{{ initials(slotProps.data.companyName) }}</span\n                >\n              </div>\n            </div>\n            <div class=\"applicant-name\">\n              {{ slotProps.data.companyName }}\n            </div>\n          </div>\n        </template>\n      </Column>\n\n      <Column sortable field=\"complianceType\" header=\" COMPLAINCE TYPE\" />\n      <Column sortable field=\"noOfemployees\" header=\" No. Employees Paid\" />\n\n      <Column sortable field=\"amount\" header=\"Amount Paid\">\n        <template #body=\"slotProps\">\n          <div>\n            {{ formatAmount(slotProps.data.amount) }}\n          </div>\n        </template></Column\n      >\n\n      <Column sortable field=\"status\" header=\"Status\">\n        <template #body=\"slotProps\">\n          <div\n            class=\"py-2 w-fit px-3 text-center rounded-full\"\n            :class=\"getStatus(slotProps.data.status).color\"\n          >\n            {{ getStatus(slotProps.data.status).text }}\n          </div>\n        </template>\n      </Column>\n\n      <Column sortable style=\"white-space: nowrap\" field=\"date\" header=\"Date\">\n        <template #body=\"slotProps\">\n          <div>\n            {{ formatDate(slotProps.data.date) }}\n          </div>\n        </template>\n      </Column>\n\n      <Column header=\"Action\">\n        <template #body=\"slotProps\">\n          <div class=\"flex items-center gap-4\">\n            <span\n              @click=\"action.action(slotProps.data)\"\n              v-for=\"action in actions\"\n              :key=\"action.title\"\n              class=\"cursor-pointer hover:text-primary\"\n            >\n              <i :class=\"[action.icon]\"></i>\n            </span>\n          </div>\n        </template>\n      </Column>\n    </DataTable>\n\n    <easiPaginate\n      :data=\"transactions\"\n      @page:update=\"updatePage\"\n      :currentPage=\"currentPage\"\n      v-model:pageSize=\"pageSize\"\n      :visibleData=\"visibleData\"\n    />\n  </div>\n\n  <UploadReceipt :isOpen=\"uploadModal\" @close=\"uploadModal = false\" />\n</template>\n\n<script setup>\nimport UploadReceipt from '../shared/UploadReceipt.vue'\n\nimport { computed, ref, onMounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { helperFunctions } from '@/composable/helperFunctions'\nimport { useDataStore } from '@/stores/data.js'\n\nconst store = useDataStore()\nconst router = useRouter()\nconst { formatAmount, formatDate, initials } = helperFunctions\n\nconst props = defineProps({\n  user: String,\n  searchText: {\n    type: String,\n    default: ''\n  },\n\n  transactions: {\n    type: Array,\n    default: () => []\n  }\n})\nconst searchContent = computed(() => props.searchText)\nconst watchTransactions = computed(() => props.transactions)\n\nconst uploadModal = ref(false)\nconst visibleData = ref([])\nconst selectedTransaction = ref([])\n\nconst currentPage = ref(0)\nconst pageSize = ref(10)\n\nconst updatePage = (pageNumber) => {\n  currentPage.value = pageNumber\n  updateVisibleData()\n}\n\nconst updateVisibleData = () => {\n  let datas = props.transactions\n  visibleData.value = datas.slice(\n    currentPage.value * pageSize.value,\n    currentPage.value * pageSize.value + pageSize.value\n  )\n\n  // if we have 0 visible todos, go back a page\n  if (visibleData.value.length == 0 && currentPage.value > 0) {\n    updatePage(currentPage.value - 1)\n  }\n}\n\nconst getStatus = (arg) => {\n  if (arg) {\n    const status = {\n      PROCESSING: {\n        color: 'bg-[#E7F7F8]',\n        text: 'Processing'\n      },\n      COMPLETED: {\n        color: 'bg-[#D4FFE7]',\n        text: 'Completed'\n      }\n    }\n    return status[arg]\n  } else {\n    return {\n      color: '',\n      text: 'N/A'\n    }\n  }\n}\n\nconst actions = computed(() => {\n  return [\n    {\n      title: 'View',\n      icon: 'pi pi-eye',\n      action(arg) {\n        console.log(arg)\n      }\n    },\n    {\n      title: 'Download',\n      icon: 'pi pi-download',\n      action(arg) {\n        console.log(arg)\n      }\n    },\n    {\n      title: 'Upload',\n      icon: 'pi pi-upload',\n      action(arg) {\n        uploadModal.value = true\n      }\n    }\n  ]\n})\n\nwatch(searchContent, () => {\n  if (searchContent.value.trim() !== '') {\n    visibleData.value = props.transactions.filter((el) =>\n      el.companyName.toLowerCase().includes(searchContent.value.toLowerCase())\n    )\n  } else {\n    updateVisibleData()\n  }\n})\n\nwatch(watchTransactions, () => {\n  updateVisibleData()\n})\n\nonMounted(() => {\n  updateVisibleData()\n})\n\nconst onRowSelect = (event) => {\n  selectedTransaction.value.push(event.data)\n}\nconst onRowUnselect = (event) => {\n  selectedTransaction.value = selectedTransaction.value.filter((el) => {\n    return el._id !== event.data._id\n  })\n}\n</script>\n\n<style lang=\"scss\" scope></style>\n","<template>\n  <main class=\"flex flex-col gap-8\">\n    <div class=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n      <h2 class=\"text-2xl font-medium\">Compliance Receipt</h2>\n\n      <div class=\"flex items-center gap-4\">\n        <easiButton\n          v-for=\"(btn, i) in buttonActions\"\n          :key=\"`button-${i}`\"\n          @click=\"btn.action\"\n          variant=\"outlined\"\n          class=\"flex items-center gap-2\"\n        >\n          <i :class=\"[btn.icon]\"></i> {{ btn.title }}</easiButton\n        >\n      </div>\n    </div>\n\n    <div class=\"flex flex-col gap-3\">\n      <Tab :tabItems=\"tabItems\" @onSetActive=\"setActiveTab\" />\n\n      <div class=\"flex flex-col sm:flex-row sm:items-center gap-4 justify-between\">\n        <div class=\"flex items-center gap-4 gap-2 md:gap-4 flex-wrap\">\n          <button\n            v-for=\"(btn, i) in actions\"\n            @click=\"btn.action\"\n            :key=\"`btn-${i}`\"\n            class=\"border border-dark-200 rounded-full px-2 py-[1.5px] hover:opacity-70\"\n          >\n            <i :class=\"[btn.icon, 'text-xs text-dark-500 mr-1']\"></i>\n            <span class=\"text-dark-500 text-xs\">{{ btn.title }}</span>\n          </button>\n        </div>\n\n        <div class=\"flex items-center gap-2 w-full sm:w-6/12 md:w-5/12\">\n          <easiSearch v-model=\"searchText\" class=\"grow\" />\n          <Filter @query=\"queryComplianceReceipt\" />\n        </div>\n      </div>\n    </div>\n\n    <ComplianceTable :searchText=\"searchText\" :transactions=\"visibleData\" />\n    <easiLoader v-if=\"loading\" />\n  </main>\n</template>\n\n<script setup>\nimport Tab from '@/components/LineTab.vue'\nimport Filter from './shared/ReceiptFilter.vue'\nimport ComplianceTable from './Table/ComplianceTable.vue'\n\nimport { computed, ref, watch, onMounted } from 'vue'\nimport { useToast } from 'vue-toastification'\nimport { useDataStore } from '@/stores/data.js'\n\nconst store = useDataStore()\nconst { query, mutate } = store\nconst toast = useToast()\n\nconst loading = ref(false)\nconst searchText = ref('')\n\nconst visibleData = ref([])\nconst complianceReceipt = computed(() => store.getComplianceReceipt)\n\nconst tabItems = computed(() => {\n  const company =\n    complianceReceipt.value &&\n    complianceReceipt.value.filter((el) => el.registrationType == 'COMPANY')\n  const personal =\n    complianceReceipt.value &&\n    complianceReceipt.value.filter((el) => el.registrationType == 'PERSONAL')\n  return [\n    {\n      title: 'All',\n      value: complianceReceipt.value && complianceReceipt.value.length\n    },\n    {\n      title: 'Company',\n      value: company && company.length\n    },\n    {\n      title: 'Personal',\n      value: personal && personal.length\n    }\n  ]\n})\nconst setActiveTab = (arg) => {\n  const company =\n    complianceReceipt.value &&\n    complianceReceipt.value.filter((el) => el.registrationType == 'COMPANY')\n  const personal =\n    complianceReceipt.value &&\n    complianceReceipt.value.filter((el) => el.registrationType == 'PERSONAL')\n\n  const obj = {\n    Company: company,\n    Personal: personal,\n    All: complianceReceipt.value\n  }\n  visibleData.value = obj[arg.title]\n}\n\nconst actions = computed(() => {\n  return []\n  return [\n    {\n      title: 'Amount',\n      icon: 'pi pi-times',\n      action() {\n        console.log('Amount')\n      }\n    },\n    {\n      title: 'Date',\n      icon: 'pi pi-times',\n      action() {\n        console.log('Date')\n      }\n    }\n  ]\n})\n\nconst buttonActions = computed(() => {\n  return [\n    {\n      title: 'Download',\n      icon: 'pi pi-download',\n      action() {\n        console.log('Mark as True')\n      }\n    },\n    {\n      title: 'Share',\n      icon: 'pi pi-share-alt',\n      action() {\n        console.log('Share')\n      }\n    },\n    {\n      title: 'Print',\n      icon: 'pi pi-print',\n      action() {\n        console.log('Print')\n      }\n    }\n  ]\n})\n\nwatch(complianceReceipt, () => {\n  visibleData.value = complianceReceipt.value\n})\n\nonMounted(() => {\n  visibleData.value = complianceReceipt.value\n})\n\nconst queryComplianceReceipt = async (arg) => {\n  try {\n    loading.value = true\n    const payload = {\n      pagination: {\n        page: null,\n        limit: 1000\n      },\n      filter: {\n        company: null,\n        amount: null,\n        type: null\n      }\n    }\n\n    const res = await query({\n      endpoint: 'GetComplianceReceipt',\n      payload: {\n        input: arg ? arg : payload\n      },\n      storeKey: 'complianceReceipt'\n    })\n\n    loading.value = false\n  } catch (error) {\n    loading.value = false\n    console.log(error.message)\n  }\n}\n\nqueryComplianceReceipt()\n</script>\n"],"names":["useDataStore","useRouter","formatAmount","formatDate","initials","helperFunctions","searchContent","computed","props","watchTransactions","uploadModal","ref","visibleData","selectedTransaction","currentPage","pageSize","updatePage","pageNumber","updateVisibleData","datas","getStatus","arg","actions","watch","el","onMounted","onRowSelect","event","onRowUnselect","store","query","mutate","useToast","loading","searchText","complianceReceipt","tabItems","company","personal","setActiveTab","obj","buttonActions","queryComplianceReceipt","res","error"],"mappings":"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"}