{"version":3,"file":"Charges-5810ed81.js","sources":["../../src/views/receipt/Table/ChargesTable.vue","../../src/views/receipt/Charges.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col gap-4\">\n    <div class=\"flex items-center justify-between\">\n      <h2 class=\"text-xl\">Charges Transaction List</h2>\n\n      <easiPaginate\n        :data=\"transactions\"\n        info-only\n        @page:update=\"updatePage\"\n        :currentPage=\"currentPage\"\n        v-model:pageSize=\"pageSize\"\n        :visibleData=\"visibleData\"\n      />\n    </div>\n    <!-- removableSort -->\n    <DataTable\n      v-model:selection=\"selectedTransaction\"\n      id=\"table-style\"\n      scrollable\n      :value=\"visibleData\"\n      @rowSelect=\"onRowSelect\"\n      @rowUnselect=\"onRowUnselect\"\n    >\n      <Column selectionMode=\"multiple\" headerStyle=\"width: 2rem\"> </Column>\n\n      <Column style=\"white-space: nowrap\" sortable field=\"companyName\" header=\"Company Name\">\n        <template #body=\"slotProps\">\n          <div @click=\"onRowClick(slotProps.data)\" class=\"applicant\">\n            <div>\n              <div class=\"applicant-avatar\">\n                <img\n                  v-if=\"slotProps.data.companyId.company.logo\"\n                  :src=\"slotProps.data.companyId.company.logo\"\n                  alt=\"\"\n                  class=\"object-cover h-full w-full\"\n                />\n                <span\n                  v-else\n                  class=\"w-full h-full bg-primary flex items-center justify-center text-white font-medium;\"\n                  >{{ initials(slotProps.data.companyId.company.companyName) }}</span\n                >\n              </div>\n            </div>\n            <div class=\"applicant-name\">\n              {{ slotProps.data.companyId.company.companyName }}\n            </div>\n          </div>\n        </template>\n      </Column>\n\n      <!-- <Column sortable field=\"subscriptionPlan\" header=\" SUBCRIPTION PLAN\" /> -->\n\n      <Column sortable header=\" SUBCRIPTION PLAN\">\n        <template #body=\"slotProps\">\n          <div>N/A</div>\n        </template></Column\n      >\n      <Column sortable field=\"paidEmployees\" header=\" No. Employees Paid\">\n        <template #body=\"slotProps\">\n          <div>\n            {{ slotProps.data.employees.length }}\n          </div>\n        </template></Column\n      >\n      <Column sortable field=\"charge\" header=\"Amount Paid\">\n        <template #body=\"slotProps\">\n          <div>\n            {{ formatAmount(slotProps.data.charge) }}\n          </div>\n        </template></Column\n      >\n\n      <Column sortable style=\"white-space: nowrap\" field=\"createdAt\" header=\"Date\">\n        <template #body=\"slotProps\">\n          <div>\n            {{ formatDate(slotProps.data.createdAt) }}\n          </div>\n        </template>\n      </Column>\n\n      <Column header=\"Action\">\n        <template #body=\"slotProps\">\n          <div class=\"flex items-center gap-4\">\n            <span\n              @click=\"action.action(slotProps.data)\"\n              v-for=\"action in actions\"\n              :key=\"action.title\"\n              class=\"cursor-pointer hover:text-primary\"\n            >\n              <i :class=\"[action.icon]\"></i>\n            </span>\n          </div>\n        </template>\n      </Column>\n    </DataTable>\n\n    <easiPaginate\n      :data=\"transactions\"\n      @page:update=\"updatePage\"\n      :currentPage=\"currentPage\"\n      v-model:pageSize=\"pageSize\"\n      :visibleData=\"visibleData\"\n    />\n  </div>\n\n  <UploadReceipt :isOpen=\"uploadModal\" @close=\"uploadModal = false\" />\n</template>\n\n<script setup>\nimport UploadReceipt from '../shared/UploadReceipt.vue'\n\nimport { computed, ref, onMounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { helperFunctions } from '@/composable/helperFunctions'\nimport { useDataStore } from '@/stores/data.js'\n\nconst store = useDataStore()\nconst router = useRouter()\nconst { formatAmount, formatDate, initials } = helperFunctions\n\nconst props = defineProps({\n  user: String,\n  searchText: {\n    type: String,\n    default: ''\n  },\n  transactions: {\n    type: Array,\n    default: () => []\n  }\n})\nconst searchContent = computed(() => props.searchText)\nconst watchTransactions = computed(() => props.transactions)\n\nconst uploadModal = ref(false)\n\nconst visibleData = ref([])\nconst selectedTransaction = ref([])\n\nconst currentPage = ref(0)\nconst pageSize = ref(10)\n\nconst updatePage = (pageNumber) => {\n  currentPage.value = pageNumber\n  updateVisibleData()\n}\n\nconst updateVisibleData = () => {\n  let datas = props.transactions\n  visibleData.value = datas.slice(\n    currentPage.value * pageSize.value,\n    currentPage.value * pageSize.value + pageSize.value\n  )\n\n  // if we have 0 visible todos, go back a page\n  if (visibleData.value.length == 0 && currentPage.value > 0) {\n    updatePage(currentPage.value - 1)\n  }\n}\n\nconst actions = computed(() => {\n  return [\n    {\n      title: 'View',\n      icon: 'pi pi-eye',\n      action(arg) {\n        console.log(arg)\n      }\n    },\n    {\n      title: 'Download',\n      icon: 'pi pi-download',\n      action(arg) {\n        console.log(arg)\n      }\n    },\n    {\n      title: 'Upload',\n      icon: 'pi pi-upload',\n      action(arg) {\n        uploadModal.value = true\n      }\n    }\n  ]\n})\n\nwatch(searchContent, () => {\n  if (searchContent.value.trim() !== '') {\n    visibleData.value = props.transactions.filter((el) =>\n      el.companyId.company.companyName.toLowerCase().includes(searchContent.value.toLowerCase())\n    )\n  } else {\n    updateVisibleData()\n  }\n})\n\nwatch(watchTransactions, () => {\n  updateVisibleData()\n})\n\nonMounted(() => {\n  updateVisibleData()\n})\n\nconst onRowClick = (arg) => {\n  console.log(arg)\n  const id = arg._id\n  router.push({ name: 'ViewReconciliation', params: { id } })\n}\nconst onRowSelect = (event) => {\n  selectedTransaction.value.push(event.data)\n}\nconst onRowUnselect = (event) => {\n  selectedTransaction.value = selectedTransaction.value.filter((el) => {\n    return el._id !== event.data._id\n  })\n}\n</script>\n\n<style lang=\"scss\" scope></style>\n","<template>\n  <main class=\"flex flex-col gap-8\">\n    <div class=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n      <h2 class=\"text-2xl font-medium\">Charges Receipt</h2>\n\n      <div class=\"flex items-center gap-4\">\n        <easiButton\n          v-for=\"(btn, i) in buttonActions\"\n          :key=\"`button-${i}`\"\n          @click=\"btn.action\"\n          variant=\"outlined\"\n          class=\"flex items-center gap-2\"\n        >\n          <i :class=\"[btn.icon]\"></i> {{ btn.title }}</easiButton\n        >\n      </div>\n    </div>\n\n    <div class=\"flex flex-col gap-3\">\n      <Tab :tabItems=\"tabItems\" @onSetActive=\"setActiveTab\" />\n\n      <div class=\"flex flex-col sm:flex-row sm:items-center gap-4 justify-between\">\n        <div class=\"flex items-center gap-4 gap-2 md:gap-4 flex-wrap\">\n          <button\n            v-for=\"(btn, i) in actions\"\n            @click=\"btn.action\"\n            :key=\"`btn-${i}`\"\n            class=\"border border-dark-200 rounded-full px-2 py-[1.5px] hover:opacity-70\"\n          >\n            <i :class=\"[btn.icon, 'text-xs text-dark-500 mr-1']\"></i>\n            <span class=\"text-dark-500 text-xs\">{{ btn.title }}</span>\n          </button>\n        </div>\n\n        <div class=\"flex items-center gap-2 w-full sm:w-6/12 md:w-5/12\">\n          <easiSearch v-model=\"searchText\" class=\"grow\" />\n          <!-- <Filter @query=\"queryChargeReceipt\" /> -->\n        </div>\n      </div>\n    </div>\n\n    <ChargesTable :searchText=\"searchText\" :transactions=\"visibleData\" />\n    <easiLoader v-if=\"loading\" />\n  </main>\n</template>\n\n<script setup>\nimport Tab from '@/components/LineTab.vue'\nimport Filter from './shared/ReceiptFilter.vue'\nimport ChargesTable from './Table/ChargesTable.vue'\n\nimport { computed, ref, watch, onMounted } from 'vue'\nimport { useToast } from 'vue-toastification'\nimport { useDataStore } from '@/stores/data.js'\n\nconst store = useDataStore()\nconst { query, mutate } = store\nconst toast = useToast()\n\nconst loading = ref(false)\nconst searchText = ref('')\n\nconst visibleData = ref([])\nconst chargeReceipt = computed(() => store.getChargeReceipt)\n\nconsole.log('chargeReceipt', chargeReceipt.value)\n\nconst tabItems = computed(() => {\n  const company =\n    chargeReceipt.value &&\n    chargeReceipt.value.filter((el) => el.companyId.registrationType == 'COMPANY')\n  const personal =\n    chargeReceipt.value &&\n    chargeReceipt.value.filter((el) => el.companyId.registrationType == 'PERSONAL')\n  return [\n    {\n      title: 'All',\n      value: chargeReceipt.value && chargeReceipt.value.length\n    },\n    {\n      title: 'Company',\n      value: company && company.length\n    },\n    {\n      title: 'Personal',\n      value: personal && personal.length\n    }\n  ]\n})\n\nconst setActiveTab = (arg) => {\n  const company =\n    chargeReceipt.value &&\n    chargeReceipt.value.filter((el) => el.companyId.registrationType == 'COMPANY')\n  const personal =\n    chargeReceipt.value &&\n    chargeReceipt.value.filter((el) => el.companyId.registrationType == 'PERSONAL')\n\n  const obj = {\n    Company: company,\n    Personal: personal,\n    All: chargeReceipt.value\n  }\n  visibleData.value = obj[arg.title]\n}\n\nconst actions = computed(() => {\n  return []\n  return [\n    {\n      title: 'Amount',\n      icon: 'pi pi-times',\n      action() {\n        console.log('Amount')\n      }\n    },\n    {\n      title: 'Date',\n      icon: 'pi pi-times',\n      action() {\n        console.log('Date')\n      }\n    }\n  ]\n})\n\nconst buttonActions = computed(() => {\n  return [\n    {\n      title: 'Download',\n      icon: 'pi pi-download',\n      action() {\n        console.log('Mark as True')\n      }\n    },\n    {\n      title: 'Share',\n      icon: 'pi pi-share-alt',\n      action() {\n        console.log('Share')\n      }\n    },\n    {\n      title: 'Print',\n      icon: 'pi pi-print',\n      action() {\n        console.log('Print')\n      }\n    }\n  ]\n})\n\nwatch(chargeReceipt, () => {\n  visibleData.value = chargeReceipt.value\n})\n\nonMounted(() => {\n  visibleData.value = chargeReceipt.value\n})\n\nconst queryChargeReceipt = async (arg) => {\n  try {\n    loading.value = true\n    const payload = {\n      pagination: {\n        page: null,\n        limit: 1000\n      }\n    }\n\n    const res = await query({\n      endpoint: 'GetChargesReceipt',\n      payload: {\n        input: arg ? arg : payload\n      },\n      storeKey: 'chargeReceipt'\n    })\n\n    loading.value = false\n  } catch (error) {\n    loading.value = false\n    console.log(error.message)\n  }\n}\n\nqueryChargeReceipt()\n</script>\n"],"names":["useDataStore","router","useRouter","formatAmount","formatDate","initials","helperFunctions","searchContent","computed","props","watchTransactions","uploadModal","ref","visibleData","selectedTransaction","currentPage","pageSize","updatePage","pageNumber","updateVisibleData","datas","actions","arg","watch","el","onMounted","onRowClick","id","onRowSelect","event","onRowUnselect","store","query","mutate","useToast","loading","searchText","chargeReceipt","tabItems","company","personal","setActiveTab","obj","buttonActions","res","error"],"mappings":"uzBAoHcA,EAAc,EAC5B,MAAMC,EAASC,EAAW,EACpB,CAAE,aAAAC,EAAc,WAAAC,EAAY,SAAAC,CAAQ,EAAKC,EAazCC,EAAgBC,EAAS,IAAMC,EAAM,UAAU,EAC/CC,EAAoBF,EAAS,IAAMC,EAAM,YAAY,EAErDE,EAAcC,EAAI,EAAK,EAEvBC,EAAcD,EAAI,EAAE,EACpBE,EAAsBF,EAAI,EAAE,EAE5BG,EAAcH,EAAI,CAAC,EACnBI,EAAWJ,EAAI,EAAE,EAEjBK,EAAcC,GAAe,CACjCH,EAAY,MAAQG,EACpBC,EAAmB,CACrB,EAEMA,EAAoB,IAAM,CAC9B,IAAIC,EAAQX,EAAM,aAClBI,EAAY,MAAQO,EAAM,MACxBL,EAAY,MAAQC,EAAS,MAC7BD,EAAY,MAAQC,EAAS,MAAQA,EAAS,KAC/C,EAGGH,EAAY,MAAM,QAAU,GAAKE,EAAY,MAAQ,GACvDE,EAAWF,EAAY,MAAQ,CAAC,CAEpC,EAEMM,EAAUb,EAAS,IAChB,CACL,CACE,MAAO,OACP,KAAM,YACN,OAAOc,EAAK,CACV,QAAQ,IAAIA,CAAG,CAChB,CACF,EACD,CACE,MAAO,WACP,KAAM,iBACN,OAAOA,EAAK,CACV,QAAQ,IAAIA,CAAG,CAChB,CACF,EACD,CACE,MAAO,SACP,KAAM,eACN,OAAOA,EAAK,CACVX,EAAY,MAAQ,EACrB,CACF,CACF,CACF,EAEDY,EAAMhB,EAAe,IAAM,CACrBA,EAAc,MAAM,KAAI,IAAO,GACjCM,EAAY,MAAQJ,EAAM,aAAa,OAAQe,GAC7CA,EAAG,UAAU,QAAQ,YAAY,cAAc,SAASjB,EAAc,MAAM,aAAa,CAC1F,EAEDY,EAAmB,CAEvB,CAAC,EAEDI,EAAMb,EAAmB,IAAM,CAC7BS,EAAmB,CACrB,CAAC,EAEDM,EAAU,IAAM,CACdN,EAAmB,CACrB,CAAC,EAED,MAAMO,EAAcJ,GAAQ,CAC1B,QAAQ,IAAIA,CAAG,EACf,MAAMK,EAAKL,EAAI,IACfrB,EAAO,KAAK,CAAE,KAAM,qBAAsB,OAAQ,CAAE,GAAA0B,CAAE,EAAI,CAC5D,EACMC,EAAeC,GAAU,CAC7Bf,EAAoB,MAAM,KAAKe,EAAM,IAAI,CAC3C,EACMC,EAAiBD,GAAU,CAC/Bf,EAAoB,MAAQA,EAAoB,MAAM,OAAQU,GACrDA,EAAG,MAAQK,EAAM,KAAK,GAC9B,CACH,o/ECjKA,MAAME,EAAQ/B,EAAc,EACtB,CAAE,MAAAgC,EAAO,OAAAC,CAAM,EAAKF,EACZG,EAAU,EAExB,MAAMC,EAAUvB,EAAI,EAAK,EACnBwB,EAAaxB,EAAI,EAAE,EAEnBC,EAAcD,EAAI,EAAE,EACpByB,EAAgB7B,EAAS,IAAMuB,EAAM,gBAAgB,EAE3D,QAAQ,IAAI,gBAAiBM,EAAc,KAAK,EAEhD,MAAMC,EAAW9B,EAAS,IAAM,CAC9B,MAAM+B,EACJF,EAAc,OACdA,EAAc,MAAM,OAAQb,GAAOA,EAAG,UAAU,kBAAoB,SAAS,EACzEgB,EACJH,EAAc,OACdA,EAAc,MAAM,OAAQb,GAAOA,EAAG,UAAU,kBAAoB,UAAU,EAChF,MAAO,CACL,CACE,MAAO,MACP,MAAOa,EAAc,OAASA,EAAc,MAAM,MACnD,EACD,CACE,MAAO,UACP,MAAOE,GAAWA,EAAQ,MAC3B,EACD,CACE,MAAO,WACP,MAAOC,GAAYA,EAAS,MAC7B,CACF,CACH,CAAC,EAEKC,EAAgBnB,GAAQ,CAC5B,MAAMiB,EACJF,EAAc,OACdA,EAAc,MAAM,OAAQb,GAAOA,EAAG,UAAU,kBAAoB,SAAS,EACzEgB,EACJH,EAAc,OACdA,EAAc,MAAM,OAAQb,GAAOA,EAAG,UAAU,kBAAoB,UAAU,EAE1EkB,EAAM,CACV,QAASH,EACT,SAAUC,EACV,IAAKH,EAAc,KACpB,EACDxB,EAAY,MAAQ6B,EAAIpB,EAAI,KAAK,CACnC,EAEMD,EAAUb,EAAS,IAChB,CAAE,CAiBV,EAEKmC,EAAgBnC,EAAS,IACtB,CACL,CACE,MAAO,WACP,KAAM,iBACN,QAAS,CACP,QAAQ,IAAI,cAAc,CAC3B,CACF,EACD,CACE,MAAO,QACP,KAAM,kBACN,QAAS,CACP,QAAQ,IAAI,OAAO,CACpB,CACF,EACD,CACE,MAAO,QACP,KAAM,cACN,QAAS,CACP,QAAQ,IAAI,OAAO,CACpB,CACF,CACF,CACF,EAED,OAAAe,EAAMc,EAAe,IAAM,CACzBxB,EAAY,MAAQwB,EAAc,KACpC,CAAC,EAEDZ,EAAU,IAAM,CACdZ,EAAY,MAAQwB,EAAc,KACpC,CAAC,GAE0B,MAAOf,GAAQ,CACxC,GAAI,CACFa,EAAQ,MAAQ,GAQhB,MAAMS,EAAM,MAAMZ,EAAM,CACtB,SAAU,oBACV,QAAS,CACP,MAAOV,GAVK,CACd,WAAY,CACV,KAAM,KACN,MAAO,GACR,CACF,CAME,EACD,SAAU,eAChB,CAAK,EAEDa,EAAQ,MAAQ,EACjB,OAAQU,EAAP,CACAV,EAAQ,MAAQ,GAChB,QAAQ,IAAIU,EAAM,OAAO,CAC1B,CACH,GAEoB"}