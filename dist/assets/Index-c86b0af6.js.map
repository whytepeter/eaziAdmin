{"version":3,"file":"Index-c86b0af6.js","sources":["../../src/views/company/index/BusinessTable.vue","../../src/assets/img/small-curve-green.svg?url","../../src/assets/icons/plus.svg","../../src/views/company/index/Index.vue"],"sourcesContent":["<template>\n  <div class=\"relative\">\n    <DataTable v-model:selection=\"selectedCompanies\" id=\"business-table\" :value=\"data\">\n      <Column selectionMode=\"multiple\" headerStyle=\"width: 3rem\"></Column>\n      <Column sortable field=\"business\" header=\"Business\">\n        <template #body=\"slotProps\">\n          <RouterLink :to=\"{\n            name: 'CompanyOverview', params: { slug: slotProps.data._id, }, query: {\n              name: slotProps.data.company.companyName\n            }\n          }\">\n            <div class=\"business\">\n              <div class=\"business-avatar\">\n                <img v-if=\"slotProps.data.company.logo\" :src=\"slotProps.data.company.logo\" alt=\"\"\n                  class=\"w-full h-full rounded-full object-cover\" />\n              </div>\n              <div class=\"business-name\">{{ slotProps.data.company.companyName }}</div>\n            </div>\n          </RouterLink>\n        </template>\n      </Column>\n      <Column field=\"registrationType\" header=\"Account\">\n        <template #body=\"slotProps\">\n          <div class=\"capitalize\">{{ slotProps.data.registrationType?.toLowerCase() }}</div>\n        </template>\n      </Column>\n      <Column field=\"employeesCount\" header=\"Employee\"></Column>\n      <Column field=\"payroll\" header=\"Payroll\"></Column>\n      <Column sortable field=\"registered\" header=\"Status\">\n        <!-- <template #body=\"slotProps\">\n          <div>\n            {{ slotProps.data.registered ? 'Registered' : 'Not Registered' }}\n          </div>\n        </template> -->\n      </Column>\n      <Column sortable field=\"createdAtFormatted\" header=\"Sign Up Date\"></Column>\n    </DataTable>\n  </div>\n</template>\n\n<script setup>\nimport DataTable from 'primevue/datatable'\nimport Column from 'primevue/column'\nimport { ref } from 'vue'\n\ndefineProps({\n  data: Object,\n  isLoading: {\n    type: Boolean,\n    default: false,\n  }\n})\nconst selectedCompanies = ref([])\n</script>\n\n<style lang=\"scss\">\n#business-table {\n  font-size: 14px;\n\n  th {\n    border: none;\n    background: #f2f1f1;\n    color: #515251;\n    font-weight: 600;\n    text-transform: capitalize;\n    border-radius: 0;\n    padding-top: 20px;\n    padding-bottom: 20px;\n\n    &:first-child {\n      border-top-left-radius: 16px;\n    }\n\n    &:last-child {\n      border-top-right-radius: 16px;\n    }\n  }\n\n  td {\n    border: none;\n    color: #515251;\n    padding-top: 20px;\n    padding-bottom: 20px;\n\n    &:first-child {\n      border-left: 2px solid #f2f1f1;\n    }\n\n    &:last-child {\n      border-right: 2px solid #f2f1f1;\n    }\n  }\n\n  tr:nth-child(2) td {\n    background: #fbfbfb;\n  }\n\n  .business {\n    @apply flex items-center gap-2;\n  }\n\n  .business-name {\n    color: #292a29;\n    font-weight: 600;\n    font-size: 14px;\n    line-height: 16px;\n  }\n\n  .business-avatar {\n    width: 32px;\n    height: 32px;\n    border-radius: 99px;\n    border: 1px solid #f2f1f1;\n  }\n}\n</style>\n","export default \"__VITE_ASSET__5d6661c7__\"","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"#D9EBCD\",\n  d: \"M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2Z\"\n}, null, -1)\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_3))\n}\nexport default { render: render }","<script setup>\nimport SearchInput from '@/components/SearchInput.vue'\nimport BusinessTable from './BusinessTable.vue'\nimport CountCard from './CountCard.vue'\nimport TablePagination from '@/components/TablePagination.vue'\nimport PlusIcon from '@/assets/icons/plus.svg'\nimport { reactive, computed, ref } from 'vue'\nimport { useQuery } from '@/api/useQuery'\nimport Loading from '@/components/Loading.vue'\nimport { useDebouncedValue } from \"@/hooks/useDebouncedValue\"\nimport {\n  Listbox,\n  ListboxButton,\n  ListboxOptions,\n  ListboxOption,\n} from '@headlessui/vue'\nimport FilterIcon from \"@/components/icons/FilterIcon.vue\"\n\nconst search = ref('')\n\nconst debouncedSearch = useDebouncedValue(search, 300)\n\nconst filters = [\n  {\n    label: 'A-Z',\n    value: \"ASC\",\n    by: \"companyName\"\n  },\n  { label: 'Z-A', value: \"DESC\" },\n  { label: 'Highest to lowest revenue', value: \"$1\" },\n  { label: 'Highest to lowest staff', value: \"$2\" },\n  { label: 'most recent to oldest', value: \"$3\" },\n  { label: 'Company', value: \"$4\" },\n  { label: 'Personal', value: \"$5\" },\n]\n\nconst selectedFilter = ref(null)\n\nconst pagination = reactive({\n  page: 1,\n  rowsPerPage: 10,\n})\n\nconst payload = computed(() => {\n  let search = debouncedSearch.value ?? ''\n\n  return {\n    input: {\n      paging: {\n        // sort: {\n        //   \"companyName\": \"ASC\"\n        // },\n        limit: pagination.rowsPerPage,\n        skip: (pagination.page - 1) * pagination.rowsPerPage,\n        search,\n      },\n      filter: [\n        // { field: 'Account', value: 'Personal' }\n      ]\n\n    }\n  }\n})\n\nconst { data, error, isLoading } = useQuery('ListCompanies', payload)\n\nconst loadingMore = computed(() => {\n  if (isLoading.value && data.value) {\n    return true\n  }\n  return false\n})\n\n\nconst { data: registrationByTypes } = useQuery('ListByRegistrationTypes')\n\nconst registrationByTypeStats = computed(() => {\n  let { users = [], total } = registrationByTypes.value ?? {};\n\n  let stats = {\n    total,\n  }\n\n  users.forEach(user => {\n    let { registrationType, accountsCount } = user\n    registrationType = registrationType.toLowerCase()\n    stats[registrationType] = accountsCount\n  })\n\n  return stats\n})\n\n</script>\n\n<template>\n  <div>\n    <Loading :data=\"data\" :error=\"error\">\n      <div>\n        <div class=\"flex gap-4 mb-10\">\n          <CountCard label=\"All business\" :value=\"registrationByTypeStats?.total\" />\n          <CountCard label=\"Company\" :value=\"registrationByTypeStats?.company\" />\n          <CountCard label=\"Personal\" :value=\"registrationByTypeStats?.personal\" />\n        </div>\n        <div class=\"flex items-center mb-10\">\n          <div class=\"flex gap-4\">\n            <SearchInput v-model:search=\"search\" />\n            <div>\n              <Listbox v-model=\"selectedFilter\">\n                <div class=\"relative\">\n                  <ListboxButton class=\"bg-[#F2F1F1] flex gap-2 items-center rounded-md px-4 h-[44px]  whitespace-nowrap\">\n                    Filter\n                    <div class=\"font-medium\" v-if=\"selectedFilter\">\n                      {{\n                        selectedFilter.label }}\n                    </div>\n                    <FilterIcon />\n\n                  </ListboxButton>\n                  <ListboxOptions class=\"z-10  w-44 text-sm bg-white rounded-lg grid  absolute right-0 top-14 shadow-lg\">\n                    <ListboxOption class=\"py-2 px-4 hover:bg-gray-200 cursor-pointer border-b border-gray-200\"\n                      v-for=\"item of filters\" :key=\"item.label\" :value=\"item\">\n                      {{ item.label }}\n                    </ListboxOption>\n                  </ListboxOptions>\n                </div>\n              </Listbox>\n            </div>\n          </div>\n          <div class=\"ml-auto\">\n            <easiButton2 class=\"w-[250px]\">\n              <template #leftIcon>\n                <PlusIcon />\n              </template>\n              Add Business\n            </easiButton2>\n          </div>\n        </div>\n        <div :class=\"{ 'opacity-50 pointer-events-none': loadingMore }\">\n          <TablePagination class=\"mb-2\" v-model:page=\"pagination.page\" v-model:rowsPerPage=\"pagination.rowsPerPage\"\n            :total-pages=\"data?.pagination?.pageTotal\" :total-records=\"data?.pagination?.totalRecords\" />\n          <BusinessTable :isLoading=\"isLoading\" :data=\"data.companies\" />\n        </div>\n      </div>\n    </Loading>\n  </div>\n</template>\n\n\n<style lang=\"scss\" scoped>\n.stats-card {\n  background: #ebfaf1;\n  border-radius: 16px;\n  padding: 10px 20px;\n\n  .label {\n    color: #515251;\n    margin-bottom: 2px;\n  }\n\n  .value {\n    color: #11453b;\n    font-weight: 600;\n  }\n}\n</style>\n"],"names":["selectedCompanies","ref","_imports_0","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","render","_ctx","_cache","_openBlock","_createElementBlock","PlusIcon","search","debouncedSearch","useDebouncedValue","filters","selectedFilter","pagination","reactive","payload","computed","data","error","isLoading","useQuery","loadingMore","registrationByTypes","registrationByTypeStats","users","total","stats","user","registrationType","accountsCount"],"mappings":"4sBAoDA,MAAMA,EAAoBC,EAAI,EAAE,ikCCpDjBC,GAAA,klBCETC,GAAa,CACjB,MAAO,6BACP,MAAO,KACP,OAAQ,KACR,KAAM,MACR,EACMC,GAA0BC,EAAoB,OAAQ,CAC1D,KAAM,UACN,EAAG,mFACL,EAAG,KAAM,EAAE,EACLC,GAAa,CACjBF,EACF,EAEO,SAASG,GAAOC,EAAMC,EAAQ,CACnC,OAAQC,EAAY,EAAEC,EAAoB,MAAOR,GAAYG,EAAU,CACzE,CACA,MAAeM,GAAA,CAAE,OAAQL,EAAM,yMCD/B,MAAMM,EAASZ,EAAI,EAAE,EAEfa,EAAkBC,GAAkBF,EAAQ,GAAG,EAE/CG,EAAU,CACd,CACE,MAAO,MACP,MAAO,MACP,GAAI,aACL,EACD,CAAE,MAAO,MAAO,MAAO,MAAQ,EAC/B,CAAE,MAAO,4BAA6B,MAAO,IAAM,EACnD,CAAE,MAAO,0BAA2B,MAAO,IAAM,EACjD,CAAE,MAAO,wBAAyB,MAAO,IAAM,EAC/C,CAAE,MAAO,UAAW,MAAO,IAAM,EACjC,CAAE,MAAO,WAAY,MAAO,IAAM,CACpC,EAEMC,EAAiBhB,EAAI,IAAI,EAEzBiB,EAAaC,EAAS,CAC1B,KAAM,EACN,YAAa,EACf,CAAC,EAEKC,EAAUC,EAAS,IAAM,CAC7B,IAAIR,EAASC,EAAgB,OAAS,GAEtC,MAAO,CACL,MAAO,CACL,OAAQ,CAIN,MAAOI,EAAW,YAClB,MAAOA,EAAW,KAAO,GAAKA,EAAW,YACzC,OAAAL,CACD,EACD,OAAQ,CAEP,CAEF,CACF,CACH,CAAC,EAEK,CAAE,KAAAS,EAAM,MAAAC,EAAO,UAAAC,CAAW,EAAGC,EAAS,gBAAiBL,CAAO,EAE9DM,EAAcL,EAAS,IACvB,GAAAG,EAAU,OAASF,EAAK,MAI7B,EAGK,CAAE,KAAMK,GAAwBF,EAAS,yBAAyB,EAElEG,EAA0BP,EAAS,IAAM,CAC7C,GAAI,CAAE,MAAAQ,EAAQ,GAAI,MAAAC,CAAO,EAAGH,EAAoB,OAAS,GAErDI,EAAQ,CACV,MAAAD,CACD,EAED,OAAAD,EAAM,QAAQG,GAAQ,CACpB,GAAI,CAAE,iBAAAC,EAAkB,cAAAC,CAAa,EAAKF,EAC1CC,EAAmBA,EAAiB,YAAa,EACjDF,EAAME,CAAgB,EAAIC,CAC9B,CAAG,EAEMH,CACT,CAAC"}