{"version":3,"file":"ViewReconciliation-5600bf1b.js","sources":["../../src/views/reconciliation/ViewReconciliation.vue"],"sourcesContent":["<template>\n  <main class=\"flex flex-col gap-8\">\n    <div class=\"text-sm text-dark-600 flex gap-1 items-center\">\n      <span @click=\"$router.go(-1)\" class=\"cursor-pointer hover:underline hover:text-dark-800\"\n        >Reconciliation</span\n      >/\n      <span> {{ company && company.company }}</span>\n    </div>\n\n    <div\n      style=\"box-shadow: 0px 9px 18px rgba(170, 170, 170, 0.15)\"\n      class=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 rounded-2xl\"\n    >\n      <div class=\"flex items-center gap-2 flex-shrink-0\">\n        <div\n          :class=\"[company && !company.pfp ? 'border-2' : '']\"\n          class=\"w-14 h-14 border-tertiary rounded-full bg-primary overflow-hidden font-semibold text-white flex items-center justify-center\"\n        >\n          <img\n            v-if=\"company && company.pfp\"\n            :src=\"company && company.pfp\"\n            alt=\"\"\n            class=\"object-cover\"\n          />\n          <span v-else>\n            {{ initials(company && company.company) }}\n          </span>\n        </div>\n        <h2 class=\"text-2xl font-bold\">{{ company && company.company }}</h2>\n      </div>\n      <div class=\"flex items-center gap-4\">\n        <easiButton\n          v-for=\"(btn, i) in buttonActions\"\n          :key=\"`button-${i}`\"\n          @click=\"btn.action\"\n          variant=\"outlined\"\n          class=\"flex items-center gap-2\"\n        >\n          <i :class=\"[btn.icon]\"></i> {{ btn.title }}</easiButton\n        >\n      </div>\n    </div>\n\n    <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6\">\n      <WalletCard\n        user\n        :value=\"company && company.reconciliationValue\"\n        :amount=\"company && company.walletBalance\"\n      />\n      <InflowOutflowCard :value=\"0.5\" :amount=\"company && company.totalInflow\" date=\"last month\" />\n      <InflowOutflowCard\n        type=\"outflow\"\n        :value=\"0.5\"\n        :amount=\"company && company.totalOutflow\"\n        date=\"last month\"\n      />\n    </div>\n\n    <div class=\"mt-10 flex flex-col gap-3\">\n      <Tab :tabItems=\"tabItems\" @onSetActive=\"setActiveTab\" />\n\n      <div class=\"flex flex-col md:flex-row sm:items-center gap-4 justify-between\">\n        <div class=\"flex items-center gap-2 md:gap-4 flex-wrap\">\n          <button\n            v-for=\"(btn, i) in actions\"\n            @click=\"btn.action\"\n            :key=\"`btn-${i}`\"\n            class=\"border border-dark-200 rounded-full px-2 py-[1.5px] text-dark-5000 group hover:border-primary\"\n          >\n            <i :class=\"[btn.icon, 'text-xs text-dark-500 group-hover:text-primary mr-1']\"></i>\n            <span class=\"text-dark-500 group-hover:text-primary text-xs\">{{ btn.title }}</span>\n          </button>\n        </div>\n\n        <div class=\"flex items-center gap-2 w-full md:w-6/12 md:w-5/12\">\n          <easiSearch v-model=\"searchText\" class=\"grow\" />\n          <Filter />\n        </div>\n      </div>\n    </div>\n\n    <Transaction\n      :user=\"company && company.company\"\n      :transactions=\"visibleData\"\n      :searchText=\"searchText\"\n    />\n\n    <easiLoader v-if=\"loading\" />\n  </main>\n</template>\n\n<script setup>\nimport WalletCard from './Card/WalletCard.vue'\nimport InflowOutflowCard from './Card/InflowOutflowCard.vue'\nimport Tab from '@/components/LineTab.vue'\nimport Filter from './shared/ReconciliationFilter.vue'\nimport Transaction from './Table/Transaction.vue'\n\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { helperFunctions } from '@/composable/helperFunctions'\nimport { useToast } from 'vue-toastification'\nimport { useDataStore } from '@/stores/data.js'\n\nconst store = useDataStore()\nconst { query, mutate } = store\nconst toast = useToast()\n\nconst { initials } = helperFunctions\nconst route = useRoute()\n\nconst loading = ref(false)\nconst searchText = ref('')\nconst visibleData = ref([])\n\nconst reconciliations = computed(() => store.getReconciliation)\nconst company = computed(() => {\n  const id = route.params.id\n  return reconciliations.value && reconciliations.value.find((el) => el._id == id)\n})\n\nconsole.log(company.value)\nconst transactions = computed(() => {\n  const arr = store.getCompanyTransactions\n  return arr.length\n    ? arr.map((el) => {\n        el.company = company.value && company.value.company\n        return el\n      })\n    : []\n})\n\nconsole.log('Company Balance', transactions.value)\n\nconst tabItems = computed(() => {\n  const inflow =\n    transactions.value && transactions.value.filter((el) => el.transactionType == 'CREDIT')\n  const outflow =\n    transactions.value && transactions.value.filter((el) => el.transactionType == 'DEBIT')\n\n  return [\n    {\n      title: 'All',\n      value: transactions.value && transactions.value.length\n    },\n    {\n      title: 'Inflow',\n      value: inflow && inflow.length\n    },\n    {\n      title: 'Outflow',\n      value: outflow && outflow.length\n    }\n  ]\n})\nconst setActiveTab = (arg) => {\n  const inflow =\n    transactions.value && transactions.value.filter((el) => el.transactionType == 'CREDIT')\n  const outflow =\n    transactions.value && transactions.value.filter((el) => el.transactionType == 'DEBIT')\n\n  const obj = {\n    Inflow: inflow,\n    Outflow: outflow,\n    All: transactions.value\n  }\n\n  visibleData.value = obj[arg.title]\n}\n\nconst actions = computed(() => {\n  return [\n    {\n      title: 'Mark As True',\n      icon: 'pi pi-check',\n      action() {\n        console.log('Mark as True')\n      }\n    },\n    {\n      title: 'Mark As False',\n      icon: 'pi pi-times',\n      action() {\n        console.log('Mark as False')\n      }\n    },\n    {\n      title: 'View Receipt',\n      icon: 'pi pi-file',\n      action() {\n        console.log('View Receipt')\n      }\n    },\n    {\n      title: 'Download Receipt',\n      icon: 'pi pi-download',\n      action() {\n        console.log('Download Receipt')\n      }\n    }\n  ]\n})\n\nconst buttonActions = computed(() => {\n  return [\n    {\n      title: 'Download',\n      icon: 'pi pi-download',\n      action() {\n        console.log('Mark as True')\n      }\n    },\n    {\n      title: 'Share',\n      icon: 'pi pi-share-alt',\n      action() {\n        console.log('Share')\n      }\n    },\n    {\n      title: 'Print',\n      icon: 'pi pi-print',\n      action() {\n        console.log('Print')\n      }\n    }\n  ]\n})\n\nwatch(transactions, () => {\n  visibleData.value = transactions.value\n})\n\nonMounted(() => {\n  visibleData.value = transactions.value\n})\n\nconst queryCompanyTransaction = async () => {\n  const id = route.params.id\n  try {\n    const payload = {\n      companyId: id,\n      pagination: {\n        page: null,\n        limit: null\n      }\n    }\n\n    const res = await query({\n      endpoint: 'GetCompanyReconciliationTransactions',\n      payload: {\n        input: payload\n      },\n      storeKey: 'companyTransactions'\n    })\n  } catch (error) {\n    console.log(error.message)\n  }\n}\n\nqueryCompanyTransaction()\n</script>\n\n<style></style>\n"],"names":["store","useDataStore","query","mutate","useToast","initials","helperFunctions","route","useRoute","loading","ref","searchText","visibleData","reconciliations","computed","company","id","el","transactions","arr","tabItems","inflow","outflow","setActiveTab","arg","obj","actions","buttonActions","watch","onMounted","res","error"],"mappings":"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"}